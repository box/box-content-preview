!function(root,factory){"use strict";"function"==typeof define&&define.amd?define("pdfjs-dist/web/pdf_viewer",["exports","pdfjs-dist/build/pdf"],factory):"undefined"!=typeof exports?factory(exports,require("../build/pdf.js")):factory(root.pdfjsDistWebPDFViewer={},root.pdfjsDistBuildPdf)}(this,function(exports,pdfjsLib){"use strict";var pdfViewerLibs={pdfjsWebPDFJS:pdfjsLib};(function(){!function(root,factory){factory(root.pdfjsWebPDFRenderingQueue={})}(this,function(exports){var CLEANUP_TIMEOUT=3e4,RenderingStates={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3},PDFRenderingQueue=function(){function PDFRenderingQueue(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1}return PDFRenderingQueue.prototype={setViewer:function(pdfViewer){this.pdfViewer=pdfViewer},setThumbnailViewer:function(pdfThumbnailViewer){this.pdfThumbnailViewer=pdfThumbnailViewer},isHighestPriority:function(view){return this.highestPriorityPage===view.renderingId},renderHighestPriority:function(currentlyVisiblePages){this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),this.pdfViewer.forceRendering(currentlyVisiblePages)||this.pdfThumbnailViewer&&this.isThumbnailViewEnabled&&this.pdfThumbnailViewer.forceRendering()||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),CLEANUP_TIMEOUT))},getHighestPriority:function(visible,views,scrolledDown){var visibleViews=visible.views,numVisible=visibleViews.length;if(0===numVisible)return!1;for(var i=0;i<numVisible;++i){var view=visibleViews[i].view;if(!this.isViewFinished(view))return view}if(scrolledDown){var nextPageIndex=visible.last.id;if(views[nextPageIndex]&&!this.isViewFinished(views[nextPageIndex]))return views[nextPageIndex]}else{var previousPageIndex=visible.first.id-2;if(views[previousPageIndex]&&!this.isViewFinished(views[previousPageIndex]))return views[previousPageIndex]}return null},isViewFinished:function(view){return view.renderingState===RenderingStates.FINISHED},renderView:function(view){var state=view.renderingState;switch(state){case RenderingStates.FINISHED:return!1;case RenderingStates.PAUSED:this.highestPriorityPage=view.renderingId,view.resume();break;case RenderingStates.RUNNING:this.highestPriorityPage=view.renderingId;break;case RenderingStates.INITIAL:this.highestPriorityPage=view.renderingId;var continueRendering=function(){this.renderHighestPriority()}.bind(this);view.draw().then(continueRendering,continueRendering)}return!0}},PDFRenderingQueue}();exports.RenderingStates=RenderingStates,exports.PDFRenderingQueue=PDFRenderingQueue}),function(root,factory){factory(root.pdfjsWebDownloadManager={},root.pdfjsWebPDFJS)}(this,function(exports,pdfjsLib){function download(blobUrl,filename){var a=document.createElement("a");if(a.click)a.href=blobUrl,a.target="_parent","download"in a&&(a.download=filename),(document.body||document.documentElement).appendChild(a),a.click(),a.parentNode.removeChild(a);else{if(window.top===window&&blobUrl.split("#")[0]===window.location.href.split("#")[0]){var padCharacter=blobUrl.indexOf("?")===-1?"?":"&";blobUrl=blobUrl.replace(/#|$/,padCharacter+"$&")}window.open(blobUrl,"_parent")}}function DownloadManager(){}DownloadManager.prototype={downloadUrl:function(url,filename){pdfjsLib.isValidUrl(url,!0)&&download(url+"#pdfjs.action=download",filename)},downloadData:function(data,filename,contentType){if(navigator.msSaveBlob)return navigator.msSaveBlob(new Blob([data],{type:contentType}),filename);var blobUrl=pdfjsLib.createObjectURL(data,contentType,pdfjsLib.PDFJS.disableCreateObjectURL);download(blobUrl,filename)},download:function(blob,url,filename){if(!URL)return void this.downloadUrl(url,filename);if(navigator.msSaveBlob)return void(navigator.msSaveBlob(blob,filename)||this.downloadUrl(url,filename));var blobUrl=URL.createObjectURL(blob);download(blobUrl,filename)}},exports.DownloadManager=DownloadManager}),function(root,factory){factory(root.pdfjsWebUIUtils={},root.pdfjsWebPDFJS)}(this,function(exports,pdfjsLib){function getOutputScale(ctx){var devicePixelRatio=window.devicePixelRatio||1,backingStoreRatio=ctx.webkitBackingStorePixelRatio||ctx.mozBackingStorePixelRatio||ctx.msBackingStorePixelRatio||ctx.oBackingStorePixelRatio||ctx.backingStorePixelRatio||1,pixelRatio=devicePixelRatio/backingStoreRatio;return{sx:pixelRatio,sy:pixelRatio,scaled:1!==pixelRatio}}function scrollIntoView(element,spot,skipOverflowHiddenElements){var parent=element.offsetParent;if(!parent)return void console.error("offsetParent is not set -- cannot scroll");for(var checkOverflow=skipOverflowHiddenElements||!1,offsetY=element.offsetTop+element.clientTop,offsetX=element.offsetLeft+element.clientLeft;parent.clientHeight===parent.scrollHeight||checkOverflow&&"hidden"===getComputedStyle(parent).overflow;)if(parent.dataset._scaleY&&(offsetY/=parent.dataset._scaleY,offsetX/=parent.dataset._scaleX),offsetY+=parent.offsetTop,offsetX+=parent.offsetLeft,parent=parent.offsetParent,!parent)return;spot&&(void 0!==spot.top&&(offsetY+=spot.top),void 0!==spot.left&&(offsetX+=spot.left,parent.scrollLeft=offsetX)),parent.scrollTop=offsetY}function watchScroll(viewAreaElement,callback){var debounceScroll=function(evt){rAF||(rAF=window.requestAnimationFrame(function(){rAF=null;var currentY=viewAreaElement.scrollTop,lastY=state.lastY;currentY!==lastY&&(state.down=currentY>lastY),state.lastY=currentY,callback(state)}))},state={down:!0,lastY:viewAreaElement.scrollTop,_eventHandler:debounceScroll},rAF=null;return viewAreaElement.addEventListener("scroll",debounceScroll,!0),state}function parseQueryString(query){for(var parts=query.split("&"),params={},i=0,ii=parts.length;i<ii;++i){var param=parts[i].split("="),key=param[0].toLowerCase(),value=param.length>1?param[1]:null;params[decodeURIComponent(key)]=decodeURIComponent(value)}return params}function binarySearchFirstItem(items,condition){var minIndex=0,maxIndex=items.length-1;if(0===items.length||!condition(items[maxIndex]))return items.length;if(condition(items[minIndex]))return minIndex;for(;minIndex<maxIndex;){var currentIndex=minIndex+maxIndex>>1,currentItem=items[currentIndex];condition(currentItem)?maxIndex=currentIndex:minIndex=currentIndex+1}return minIndex}function approximateFraction(x){if(Math.floor(x)===x)return[x,1];var xinv=1/x,limit=8;if(xinv>limit)return[1,limit];if(Math.floor(xinv)===xinv)return[1,xinv];for(var x_=x>1?xinv:x,a=0,b=1,c=1,d=1;;){var p=a+c,q=b+d;if(q>limit)break;x_<=p/q?(c=p,d=q):(a=p,b=q)}return x_-a/b<c/d-x_?x_===x?[a,b]:[b,a]:x_===x?[c,d]:[d,c]}function roundToDivide(x,div){var r=x%div;return 0===r?x:Math.round(x-r+div)}function getVisibleElements(scrollEl,views,sortByVisibility){function isElementBottomBelowViewTop(view){var element=view.div,elementBottom=element.offsetTop+element.clientTop+element.clientHeight;return elementBottom>top}for(var view,element,currentHeight,viewHeight,hiddenHeight,percentHeight,currentWidth,viewWidth,top=scrollEl.scrollTop,bottom=top+scrollEl.clientHeight,left=scrollEl.scrollLeft,right=left+scrollEl.clientWidth,visible=[],firstVisibleElementInd=0===views.length?0:binarySearchFirstItem(views,isElementBottomBelowViewTop),i=firstVisibleElementInd,ii=views.length;i<ii&&(view=views[i],element=view.div,currentHeight=element.offsetTop+element.clientTop,viewHeight=element.clientHeight,!(currentHeight>bottom));i++)currentWidth=element.offsetLeft+element.clientLeft,viewWidth=element.clientWidth,currentWidth+viewWidth<left||currentWidth>right||(hiddenHeight=Math.max(0,top-currentHeight)+Math.max(0,currentHeight+viewHeight-bottom),percentHeight=100*(viewHeight-hiddenHeight)/viewHeight|0,visible.push({id:view.id,x:currentWidth,y:currentHeight,view:view,percent:percentHeight}));var first=visible[0],last=visible[visible.length-1];return sortByVisibility&&visible.sort(function(a,b){var pc=a.percent-b.percent;return Math.abs(pc)>.001?-pc:a.id-b.id}),{first:first,last:last,views:visible}}function noContextMenuHandler(e){e.preventDefault()}function getPDFFileNameFromURL(url){var reURI=/^(?:([^:]+:)?\/\/[^\/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,reFilename=/[^\/?#=]+\.pdf\b(?!.*\.pdf\b)/i,splitURI=reURI.exec(url),suggestedFilename=reFilename.exec(splitURI[1])||reFilename.exec(splitURI[2])||reFilename.exec(splitURI[3]);if(suggestedFilename&&(suggestedFilename=suggestedFilename[0],suggestedFilename.indexOf("%")!==-1))try{suggestedFilename=reFilename.exec(decodeURIComponent(suggestedFilename))[0]}catch(e){}return suggestedFilename||"document.pdf"}function normalizeWheelEventDelta(evt){var delta=Math.sqrt(evt.deltaX*evt.deltaX+evt.deltaY*evt.deltaY),angle=Math.atan2(evt.deltaY,evt.deltaX);-.25*Math.PI<angle&&angle<.75*Math.PI&&(delta=-delta);var MOUSE_DOM_DELTA_PIXEL_MODE=0,MOUSE_DOM_DELTA_LINE_MODE=1,MOUSE_PIXELS_PER_LINE=30,MOUSE_LINES_PER_PAGE=30;return evt.deltaMode===MOUSE_DOM_DELTA_PIXEL_MODE?delta/=MOUSE_PIXELS_PER_LINE*MOUSE_LINES_PER_PAGE:evt.deltaMode===MOUSE_DOM_DELTA_LINE_MODE&&(delta/=MOUSE_LINES_PER_PAGE),delta}var CSS_UNITS=96/72,DEFAULT_SCALE_VALUE="auto",DEFAULT_SCALE=1,UNKNOWN_SCALE=0,MAX_AUTO_SCALE=1.25,SCROLLBAR_PADDING=40,VERTICAL_PADDING=5,mozL10n=document.mozL10n||document.webL10n,PDFJS=pdfjsLib.PDFJS;PDFJS.disableFullscreen=void 0!==PDFJS.disableFullscreen&&PDFJS.disableFullscreen,PDFJS.useOnlyCssZoom=void 0!==PDFJS.useOnlyCssZoom&&PDFJS.useOnlyCssZoom,PDFJS.maxCanvasPixels=void 0===PDFJS.maxCanvasPixels?16777216:PDFJS.maxCanvasPixels,PDFJS.disableHistory=void 0!==PDFJS.disableHistory&&PDFJS.disableHistory,PDFJS.disableTextLayer=void 0!==PDFJS.disableTextLayer&&PDFJS.disableTextLayer,PDFJS.ignoreCurrentPositionOnZoom=void 0!==PDFJS.ignoreCurrentPositionOnZoom&&PDFJS.ignoreCurrentPositionOnZoom,PDFJS.locale=void 0===PDFJS.locale?navigator.language:PDFJS.locale;var EventBus=function(){function EventBus(){this._listeners=Object.create(null)}return EventBus.prototype={on:function(eventName,listener){var eventListeners=this._listeners[eventName];eventListeners||(eventListeners=[],this._listeners[eventName]=eventListeners),eventListeners.push(listener)},off:function(eventName,listener){var i,eventListeners=this._listeners[eventName];!eventListeners||(i=eventListeners.indexOf(listener))<0||eventListeners.splice(i,1)},dispatch:function(eventName){var eventListeners=this._listeners[eventName];if(eventListeners&&0!==eventListeners.length){var args=Array.prototype.slice.call(arguments,1);eventListeners.slice(0).forEach(function(listener){listener.apply(null,args)})}}},EventBus}(),ProgressBar=function(){function clamp(v,min,max){return Math.min(Math.max(v,min),max)}function ProgressBar(id,opts){this.visible=!0,this.div=document.querySelector(id+" .progress"),this.bar=this.div.parentNode,this.height=opts.height||100,this.width=opts.width||100,this.units=opts.units||"%",this.div.style.height=this.height+this.units,this.percent=0}return ProgressBar.prototype={updateBar:function(){if(this._indeterminate)return this.div.classList.add("indeterminate"),void(this.div.style.width=this.width+this.units);this.div.classList.remove("indeterminate");var progressSize=this.width*this._percent/100;this.div.style.width=progressSize+this.units},get percent(){return this._percent},set percent(val){this._indeterminate=isNaN(val),this._percent=clamp(val,0,100),this.updateBar()},setWidth:function(viewer){if(viewer){var container=viewer.parentNode,scrollbarWidth=container.offsetWidth-viewer.offsetWidth;scrollbarWidth>0&&this.bar.setAttribute("style","width: calc(100% - "+scrollbarWidth+"px);")}},hide:function(){this.visible&&(this.visible=!1,this.bar.classList.add("hidden"),document.body.classList.remove("loadingInProgress"))},show:function(){this.visible||(this.visible=!0,document.body.classList.add("loadingInProgress"),this.bar.classList.remove("hidden"))}},ProgressBar}();exports.CSS_UNITS=CSS_UNITS,exports.DEFAULT_SCALE_VALUE=DEFAULT_SCALE_VALUE,exports.DEFAULT_SCALE=DEFAULT_SCALE,exports.UNKNOWN_SCALE=UNKNOWN_SCALE,exports.MAX_AUTO_SCALE=MAX_AUTO_SCALE,exports.SCROLLBAR_PADDING=SCROLLBAR_PADDING,exports.VERTICAL_PADDING=VERTICAL_PADDING,exports.mozL10n=mozL10n,exports.EventBus=EventBus,exports.ProgressBar=ProgressBar,exports.getPDFFileNameFromURL=getPDFFileNameFromURL,exports.noContextMenuHandler=noContextMenuHandler,exports.parseQueryString=parseQueryString,exports.getVisibleElements=getVisibleElements,exports.roundToDivide=roundToDivide,exports.approximateFraction=approximateFraction,exports.getOutputScale=getOutputScale,exports.scrollIntoView=scrollIntoView,exports.watchScroll=watchScroll,exports.binarySearchFirstItem=binarySearchFirstItem,exports.normalizeWheelEventDelta=normalizeWheelEventDelta}),function(root,factory){factory(root.pdfjsWebDOMEvents={},root.pdfjsWebUIUtils)}(this,function(exports,uiUtils){function attachDOMEventsToEventBus(eventBus){eventBus.on("documentload",function(){var event=document.createEvent("CustomEvent");event.initCustomEvent("documentload",!0,!0,{}),window.dispatchEvent(event)}),eventBus.on("pagerendered",function(e){var event=document.createEvent("CustomEvent");event.initCustomEvent("pagerendered",!0,!0,{pageNumber:e.pageNumber,cssTransform:e.cssTransform}),e.source.div.dispatchEvent(event)}),eventBus.on("textlayerrendered",function(e){var event=document.createEvent("CustomEvent");event.initCustomEvent("textlayerrendered",!0,!0,{pageNumber:e.pageNumber}),e.source.textLayerDiv.dispatchEvent(event)}),eventBus.on("pagechange",function(e){var event=document.createEvent("UIEvents");event.initUIEvent("pagechange",!0,!0,window,0),event.pageNumber=e.pageNumber,e.source.container.dispatchEvent(event)}),eventBus.on("pagesinit",function(e){var event=document.createEvent("CustomEvent");event.initCustomEvent("pagesinit",!0,!0,null),e.source.container.dispatchEvent(event)}),eventBus.on("pagesloaded",function(e){var event=document.createEvent("CustomEvent");event.initCustomEvent("pagesloaded",!0,!0,{pagesCount:e.pagesCount}),e.source.container.dispatchEvent(event)}),eventBus.on("scalechange",function(e){var event=document.createEvent("UIEvents");event.initUIEvent("scalechange",!0,!0,window,0),event.scale=e.scale,event.presetValue=e.presetValue,e.source.container.dispatchEvent(event)}),eventBus.on("updateviewarea",function(e){var event=document.createEvent("UIEvents");event.initUIEvent("updateviewarea",!0,!0,window,0),event.location=e.location,e.source.container.dispatchEvent(event)}),eventBus.on("find",function(e){if(e.source!==window){var event=document.createEvent("CustomEvent");event.initCustomEvent("find"+e.type,!0,!0,{query:e.query,phraseSearch:e.phraseSearch,caseSensitive:e.caseSensitive,highlightAll:e.highlightAll,findPrevious:e.findPrevious}),window.dispatchEvent(event)}}),eventBus.on("attachmentsloaded",function(e){var event=document.createEvent("CustomEvent");event.initCustomEvent("attachmentsloaded",!0,!0,{attachmentsCount:e.attachmentsCount}),e.source.container.dispatchEvent(event)}),eventBus.on("sidebarviewchanged",function(e){var event=document.createEvent("CustomEvent");event.initCustomEvent("sidebarviewchanged",!0,!0,{view:e.view}),e.source.outerContainer.dispatchEvent(event)}),eventBus.on("pagemode",function(e){var event=document.createEvent("CustomEvent");event.initCustomEvent("pagemode",!0,!0,{mode:e.mode}),e.source.pdfViewer.container.dispatchEvent(event)}),eventBus.on("namedaction",function(e){var event=document.createEvent("CustomEvent");event.initCustomEvent("namedaction",!0,!0,{action:e.action}),e.source.pdfViewer.container.dispatchEvent(event)}),eventBus.on("presentationmodechanged",function(e){var event=document.createEvent("CustomEvent");event.initCustomEvent("presentationmodechanged",!0,!0,{active:e.active,switchInProgress:e.switchInProgress}),window.dispatchEvent(event)}),eventBus.on("outlineloaded",function(e){var event=document.createEvent("CustomEvent");event.initCustomEvent("outlineloaded",!0,!0,{outlineCount:e.outlineCount}),e.source.container.dispatchEvent(event)})}function getGlobalEventBus(){return globalEventBus?globalEventBus:(globalEventBus=new EventBus,attachDOMEventsToEventBus(globalEventBus),globalEventBus)}var EventBus=uiUtils.EventBus,globalEventBus=null;exports.attachDOMEventsToEventBus=attachDOMEventsToEventBus,exports.getGlobalEventBus=getGlobalEventBus}),function(root,factory){factory(root.pdfjsWebPDFFindController={},root.pdfjsWebUIUtils)}(this,function(exports,uiUtils){var scrollIntoView=uiUtils.scrollIntoView,FindStates={FIND_FOUND:0,FIND_NOTFOUND:1,FIND_WRAPPED:2,FIND_PENDING:3},FIND_SCROLL_OFFSET_TOP=-50,FIND_SCROLL_OFFSET_LEFT=-400,CHARACTERS_TO_NORMALIZE={"‘":"'","’":"'","‚":"'","‛":"'","“":'"',"”":'"',"„":'"',"‟":'"',"¼":"1/4","½":"1/2","¾":"3/4"},PDFFindController=function(){function PDFFindController(options){this.pdfViewer=options.pdfViewer||null,this.onUpdateResultsCount=null,this.onUpdateState=null,this.reset();var replace=Object.keys(CHARACTERS_TO_NORMALIZE).join("");this.normalizationRegex=new RegExp("["+replace+"]","g")}return PDFFindController.prototype={reset:function(){this.startedTextExtraction=!1,this.extractTextPromises=[],this.pendingFindMatches=Object.create(null),this.active=!1,this.pageContents=[],this.pageMatches=[],this.pageMatchesLength=null,this.matchCount=0,this.selected={pageIdx:-1,matchIdx:-1},this.offset={pageIdx:null,matchIdx:null},this.pagesToSearch=null,this.resumePageIdx=null,this.state=null,this.dirtyMatch=!1,this.findTimeout=null,this.firstPagePromise=new Promise(function(resolve){this.resolveFirstPage=resolve}.bind(this))},normalize:function(text){return text.replace(this.normalizationRegex,function(ch){return CHARACTERS_TO_NORMALIZE[ch]})},_prepareMatches:function(matchesWithLength,matches,matchesLength){function isSubTerm(matchesWithLength,currentIndex){var currentElem,prevElem,nextElem;if(currentElem=matchesWithLength[currentIndex],nextElem=matchesWithLength[currentIndex+1],currentIndex<matchesWithLength.length-1&&currentElem.match===nextElem.match)return currentElem.skipped=!0,!0;for(var i=currentIndex-1;i>=0;i--)if(prevElem=matchesWithLength[i],!prevElem.skipped){if(prevElem.match+prevElem.matchLength<currentElem.match)break;if(prevElem.match+prevElem.matchLength>=currentElem.match+currentElem.matchLength)return currentElem.skipped=!0,!0}return!1}var i,len;for(matchesWithLength.sort(function(a,b){return a.match===b.match?a.matchLength-b.matchLength:a.match-b.match}),i=0,len=matchesWithLength.length;i<len;i++)isSubTerm(matchesWithLength,i)||(matches.push(matchesWithLength[i].match),matchesLength.push(matchesWithLength[i].matchLength))},calcFindPhraseMatch:function(query,pageIndex,pageContent){for(var matches=[],queryLen=query.length,matchIdx=-queryLen;;){if(matchIdx=pageContent.indexOf(query,matchIdx+queryLen),matchIdx===-1)break;matches.push(matchIdx)}this.pageMatches[pageIndex]=matches},calcFindWordMatch:function(query,pageIndex,pageContent){for(var subquery,subqueryLen,matchIdx,matchesWithLength=[],queryArray=query.match(/\S+/g),i=0,len=queryArray.length;i<len;i++)for(subquery=queryArray[i],subqueryLen=subquery.length,matchIdx=-subqueryLen;;){if(matchIdx=pageContent.indexOf(subquery,matchIdx+subqueryLen),matchIdx===-1)break;matchesWithLength.push({match:matchIdx,matchLength:subqueryLen,skipped:!1})}this.pageMatchesLength||(this.pageMatchesLength=[]),this.pageMatchesLength[pageIndex]=[],this.pageMatches[pageIndex]=[],this._prepareMatches(matchesWithLength,this.pageMatches[pageIndex],this.pageMatchesLength[pageIndex])},calcFindMatch:function(pageIndex){var pageContent=this.normalize(this.pageContents[pageIndex]),query=this.normalize(this.state.query),caseSensitive=this.state.caseSensitive,phraseSearch=this.state.phraseSearch,queryLen=query.length;0!==queryLen&&(caseSensitive||(pageContent=pageContent.toLowerCase(),query=query.toLowerCase()),phraseSearch?this.calcFindPhraseMatch(query,pageIndex,pageContent):this.calcFindWordMatch(query,pageIndex,pageContent),this.updatePage(pageIndex),this.resumePageIdx===pageIndex&&(this.resumePageIdx=null,this.nextPageMatch()),this.pageMatches[pageIndex].length>0&&(this.matchCount+=this.pageMatches[pageIndex].length,this.updateUIResultsCount()))},extractText:function(){function extractPageText(pageIndex){self.pdfViewer.getPageTextContent(pageIndex).then(function(textContent){for(var textItems=textContent.items,str=[],i=0,len=textItems.length;i<len;i++)str.push(textItems[i].str);self.pageContents.push(str.join("")),extractTextPromisesResolves[pageIndex](pageIndex),pageIndex+1<self.pdfViewer.pagesCount&&extractPageText(pageIndex+1)})}if(!this.startedTextExtraction){this.startedTextExtraction=!0,this.pageContents=[];for(var extractTextPromisesResolves=[],numPages=this.pdfViewer.pagesCount,i=0;i<numPages;i++)this.extractTextPromises.push(new Promise(function(resolve){extractTextPromisesResolves.push(resolve)}));var self=this;extractPageText(0)}},executeCommand:function(cmd,state){null!==this.state&&"findagain"===cmd||(this.dirtyMatch=!0),this.state=state,this.updateUIState(FindStates.FIND_PENDING),this.firstPagePromise.then(function(){this.extractText(),clearTimeout(this.findTimeout),"find"===cmd?this.findTimeout=setTimeout(this.nextMatch.bind(this),250):this.nextMatch()}.bind(this))},updatePage:function(index){this.selected.pageIdx===index&&(this.pdfViewer.currentPageNumber=index+1);var page=this.pdfViewer.getPageView(index);page.textLayer&&page.textLayer.updateMatches()},nextMatch:function(){var previous=this.state.findPrevious,currentPageIndex=this.pdfViewer.currentPageNumber-1,numPages=this.pdfViewer.pagesCount;if(this.active=!0,this.dirtyMatch){this.dirtyMatch=!1,this.selected.pageIdx=this.selected.matchIdx=-1,this.offset.pageIdx=currentPageIndex,this.offset.matchIdx=null,this.hadMatch=!1,this.resumePageIdx=null,this.pageMatches=[],this.matchCount=0,this.pageMatchesLength=null;for(var self=this,i=0;i<numPages;i++)this.updatePage(i),i in this.pendingFindMatches||(this.pendingFindMatches[i]=!0,this.extractTextPromises[i].then(function(pageIdx){delete self.pendingFindMatches[pageIdx],self.calcFindMatch(pageIdx)}))}if(""===this.state.query)return void this.updateUIState(FindStates.FIND_FOUND);if(!this.resumePageIdx){var offset=this.offset;if(this.pagesToSearch=numPages,null!==offset.matchIdx){var numPageMatches=this.pageMatches[offset.pageIdx].length;if(!previous&&offset.matchIdx+1<numPageMatches||previous&&offset.matchIdx>0)return this.hadMatch=!0,offset.matchIdx=previous?offset.matchIdx-1:offset.matchIdx+1,void this.updateMatch(!0);this.advanceOffsetPage(previous)}this.nextPageMatch()}},matchesReady:function(matches){var offset=this.offset,numMatches=matches.length,previous=this.state.findPrevious;return numMatches?(this.hadMatch=!0,offset.matchIdx=previous?numMatches-1:0,this.updateMatch(!0),!0):(this.advanceOffsetPage(previous),!!(offset.wrapped&&(offset.matchIdx=null,this.pagesToSearch<0))&&(this.updateMatch(!1),!0))},updateMatchPosition:function(pageIndex,index,elements,beginIdx){if(this.selected.matchIdx===index&&this.selected.pageIdx===pageIndex){var spot={top:FIND_SCROLL_OFFSET_TOP,left:FIND_SCROLL_OFFSET_LEFT};scrollIntoView(elements[beginIdx],spot,!0)}},nextPageMatch:function(){null!==this.resumePageIdx&&console.error("There can only be one pending page.");do{var pageIdx=this.offset.pageIdx,matches=this.pageMatches[pageIdx];if(!matches){this.resumePageIdx=pageIdx;break}}while(!this.matchesReady(matches))},advanceOffsetPage:function(previous){var offset=this.offset,numPages=this.extractTextPromises.length;offset.pageIdx=previous?offset.pageIdx-1:offset.pageIdx+1,offset.matchIdx=null,this.pagesToSearch--,(offset.pageIdx>=numPages||offset.pageIdx<0)&&(offset.pageIdx=previous?numPages-1:0,offset.wrapped=!0)},updateMatch:function(found){var state=FindStates.FIND_NOTFOUND,wrapped=this.offset.wrapped;if(this.offset.wrapped=!1,found){var previousPage=this.selected.pageIdx;this.selected.pageIdx=this.offset.pageIdx,this.selected.matchIdx=this.offset.matchIdx,state=wrapped?FindStates.FIND_WRAPPED:FindStates.FIND_FOUND,previousPage!==-1&&previousPage!==this.selected.pageIdx&&this.updatePage(previousPage)}this.updateUIState(state,this.state.findPrevious),this.selected.pageIdx!==-1&&this.updatePage(this.selected.pageIdx)},updateUIResultsCount:function(){this.onUpdateResultsCount&&this.onUpdateResultsCount(this.matchCount)},updateUIState:function(state,previous){this.onUpdateState&&this.onUpdateState(state,previous,this.matchCount)}},PDFFindController}();exports.FindStates=FindStates,exports.PDFFindController=PDFFindController}),function(root,factory){factory(root.pdfjsWebPDFHistory={},root.pdfjsWebDOMEvents)}(this,function(exports,domEvents){function PDFHistory(options){this.linkService=options.linkService,this.eventBus=options.eventBus||domEvents.getGlobalEventBus(),this.initialized=!1,this.initialDestination=null,this.initialBookmark=null}PDFHistory.prototype={initialize:function(fingerprint){function updateHistoryWithCurrentHash(){self.previousHash=window.location.hash.slice(1),self._pushToHistory({hash:self.previousHash},!1,!0),self._updatePreviousBookmark()}function replacePreviousHistoryState(params,callback){function rewriteHistoryAfterBack(){window.removeEventListener("popstate",rewriteHistoryAfterBack),window.addEventListener("popstate",rewriteHistoryAfterForward),self._pushToHistory(params,!1,!0),history.forward()}function rewriteHistoryAfterForward(){window.removeEventListener("popstate",rewriteHistoryAfterForward),self.allowHashChange=!0,self.historyUnlocked=!0,callback()}self.historyUnlocked=!1,self.allowHashChange=!1,window.addEventListener("popstate",rewriteHistoryAfterBack),history.back()}function pdfHistoryBeforeUnload(){var previousParams=self._getPreviousParams(null,!0);if(previousParams){var replacePrevious=!self.current.dest&&self.current.hash!==self.previousHash;self._pushToHistory(previousParams,!1,replacePrevious),self._updatePreviousBookmark()}window.removeEventListener("beforeunload",pdfHistoryBeforeUnload,!1)}this.initialized=!0,this.reInitialized=!1,this.allowHashChange=!0,this.historyUnlocked=!0,this.isViewerInPresentationMode=!1,this.previousHash=window.location.hash.substring(1),this.currentBookmark="",this.currentPage=0,this.updatePreviousBookmark=!1,this.previousBookmark="",this.previousPage=0,this.nextHashParam="",this.fingerprint=fingerprint,this.currentUid=this.uid=0,this.current={};var state=window.history.state;this._isStateObjectDefined(state)?(state.target.dest?this.initialDestination=state.target.dest:this.initialBookmark=state.target.hash,this.currentUid=state.uid,this.uid=state.uid+1,this.current=state.target):(state&&state.fingerprint&&this.fingerprint!==state.fingerprint&&(this.reInitialized=!0),this._pushOrReplaceState({fingerprint:this.fingerprint},!0));var self=this;window.addEventListener("popstate",function(evt){if(self.historyUnlocked){if(evt.state)return void self._goTo(evt.state);if(0===self.uid){var previousParams=self.previousHash&&self.currentBookmark&&self.previousHash!==self.currentBookmark?{hash:self.currentBookmark,page:self.currentPage}:{page:1};replacePreviousHistoryState(previousParams,function(){updateHistoryWithCurrentHash()})}else updateHistoryWithCurrentHash()}},!1),window.addEventListener("beforeunload",pdfHistoryBeforeUnload,!1),window.addEventListener("pageshow",function(evt){window.addEventListener("beforeunload",pdfHistoryBeforeUnload,!1)},!1),self.eventBus.on("presentationmodechanged",function(e){self.isViewerInPresentationMode=e.active})},clearHistoryState:function(){this._pushOrReplaceState(null,!0)},_isStateObjectDefined:function(state){return!!(state&&state.uid>=0&&state.fingerprint&&this.fingerprint===state.fingerprint&&state.target&&state.target.hash)},_pushOrReplaceState:function(stateObj,replace){replace?window.history.replaceState(stateObj,"",document.URL):window.history.pushState(stateObj,"",document.URL)},get isHashChangeUnlocked(){return!this.initialized||this.allowHashChange},_updatePreviousBookmark:function(){this.updatePreviousBookmark&&this.currentBookmark&&this.currentPage&&(this.previousBookmark=this.currentBookmark,this.previousPage=this.currentPage,this.updatePreviousBookmark=!1)},updateCurrentBookmark:function(bookmark,pageNum){this.initialized&&(this.currentBookmark=bookmark.substring(1),this.currentPage=0|pageNum,this._updatePreviousBookmark())},updateNextHashParam:function(param){this.initialized&&(this.nextHashParam=param)},push:function(params,isInitialBookmark){if(this.initialized&&this.historyUnlocked){if(params.dest&&!params.hash&&(params.hash=this.current.hash&&this.current.dest&&this.current.dest===params.dest?this.current.hash:this.linkService.getDestinationHash(params.dest).split("#")[1]),params.page&&(params.page|=0),isInitialBookmark){var target=window.history.state.target;return target||(this._pushToHistory(params,!1),this.previousHash=window.location.hash.substring(1)),this.updatePreviousBookmark=!this.nextHashParam,void(target&&this._updatePreviousBookmark())}if(this.nextHashParam){if(this.nextHashParam===params.hash)return this.nextHashParam=null,void(this.updatePreviousBookmark=!0);this.nextHashParam=null}params.hash?this.current.hash?this.current.hash!==params.hash?this._pushToHistory(params,!0):(!this.current.page&&params.page&&this._pushToHistory(params,!1,!0),this.updatePreviousBookmark=!0):this._pushToHistory(params,!0):this.current.page&&params.page&&this.current.page!==params.page&&this._pushToHistory(params,!0)}},_getPreviousParams:function(onlyCheckPage,beforeUnload){if(!this.currentBookmark||!this.currentPage)return null;if(this.updatePreviousBookmark&&(this.updatePreviousBookmark=!1),this.uid>0&&(!this.previousBookmark||!this.previousPage))return null;if(!this.current.dest&&!onlyCheckPage||beforeUnload){if(this.previousBookmark===this.currentBookmark)return null}else{if(!this.current.page&&!onlyCheckPage)return null;if(this.previousPage===this.currentPage)return null}var params={hash:this.currentBookmark,page:this.currentPage};return this.isViewerInPresentationMode&&(params.hash=null),params},_stateObj:function(params){return{fingerprint:this.fingerprint,uid:this.uid,target:params}},_pushToHistory:function(params,addPrevious,overwrite){if(this.initialized){if(!params.hash&&params.page&&(params.hash="page="+params.page),addPrevious&&!overwrite){var previousParams=this._getPreviousParams();if(previousParams){var replacePrevious=!this.current.dest&&this.current.hash!==this.previousHash;this._pushToHistory(previousParams,!1,replacePrevious)}}this._pushOrReplaceState(this._stateObj(params),overwrite||0===this.uid),this.currentUid=this.uid++,this.current=params,this.updatePreviousBookmark=!0}},_goTo:function(state){if(this.initialized&&this.historyUnlocked&&this._isStateObjectDefined(state)){if(!this.reInitialized&&state.uid<this.currentUid){var previousParams=this._getPreviousParams(!0);if(previousParams)return this._pushToHistory(this.current,!1),this._pushToHistory(previousParams,!1),this.currentUid=state.uid,void window.history.back()}this.historyUnlocked=!1,state.target.dest?this.linkService.navigateTo(state.target.dest):this.linkService.setHash(state.target.hash),this.currentUid=state.uid,state.uid>this.uid&&(this.uid=state.uid),this.current=state.target,this.updatePreviousBookmark=!0;var currentHash=window.location.hash.substring(1);this.previousHash!==currentHash&&(this.allowHashChange=!1),this.previousHash=currentHash,this.historyUnlocked=!0}},back:function(){this.go(-1)},forward:function(){this.go(1)},go:function(direction){if(this.initialized&&this.historyUnlocked){var state=window.history.state;direction===-1&&state&&state.uid>0?window.history.back():1===direction&&state&&state.uid<this.uid-1&&window.history.forward()}}},exports.PDFHistory=PDFHistory}),function(root,factory){factory(root.pdfjsWebPDFLinkService={},root.pdfjsWebUIUtils,root.pdfjsWebDOMEvents)}(this,function(exports,uiUtils,domEvents){function isPageNumber(str){return PageNumberRegExp.test(str)}var parseQueryString=uiUtils.parseQueryString,PageNumberRegExp=/^\d+$/,PDFLinkService=function(){function PDFLinkService(options){
options=options||{},this.eventBus=options.eventBus||domEvents.getGlobalEventBus(),this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null,this._pagesRefCache=null}function isValidExplicitDestination(dest){if(!(dest instanceof Array))return!1;var destLength=dest.length,allowNull=!0;if(destLength<2)return!1;var page=dest[0];if(!("object"==typeof page&&"number"==typeof page.num&&(0|page.num)===page.num&&"number"==typeof page.gen&&(0|page.gen)===page.gen||"number"==typeof page&&(0|page)===page&&page>=0))return!1;var zoom=dest[1];if("object"!=typeof zoom||"string"!=typeof zoom.name)return!1;switch(zoom.name){case"XYZ":if(5!==destLength)return!1;break;case"Fit":case"FitB":return 2===destLength;case"FitH":case"FitBH":case"FitV":case"FitBV":if(3!==destLength)return!1;break;case"FitR":if(6!==destLength)return!1;allowNull=!1;break;default:return!1}for(var i=2;i<destLength;i++){var param=dest[i];if(!("number"==typeof param||allowNull&&null===param))return!1}return!0}return PDFLinkService.prototype={setDocument:function(pdfDocument,baseUrl){this.baseUrl=baseUrl,this.pdfDocument=pdfDocument,this._pagesRefCache=Object.create(null)},setViewer:function(pdfViewer){this.pdfViewer=pdfViewer},setHistory:function(pdfHistory){this.pdfHistory=pdfHistory},get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0},get page(){return this.pdfViewer.currentPageNumber},set page(value){this.pdfViewer.currentPageNumber=value},navigateTo:function(dest){var destinationPromise,destString="",self=this,goToDestination=function(destRef){var pageNumber=destRef instanceof Object?self._pagesRefCache[destRef.num+" "+destRef.gen+" R"]:destRef+1;if(pageNumber){if(pageNumber>self.pagesCount)return void console.error("PDFLinkService_navigateTo: Trying to navigate to a non-existent page.");self.pdfViewer.scrollPageIntoView({pageNumber:pageNumber,destArray:dest}),self.pdfHistory&&self.pdfHistory.push({dest:dest,hash:destString,page:pageNumber})}else self.pdfDocument.getPageIndex(destRef).then(function(pageIndex){var pageNum=pageIndex+1,cacheKey=destRef.num+" "+destRef.gen+" R";self._pagesRefCache[cacheKey]=pageNum,goToDestination(destRef)})};"string"==typeof dest?(destString=dest,destinationPromise=this.pdfDocument.getDestination(dest)):destinationPromise=Promise.resolve(dest),destinationPromise.then(function(destination){dest=destination,destination instanceof Array&&goToDestination(destination[0])})},getDestinationHash:function(dest){if("string"==typeof dest)return this.getAnchorUrl("#"+(isPageNumber(dest)?"nameddest=":"")+escape(dest));if(dest instanceof Array){var str=JSON.stringify(dest);return this.getAnchorUrl("#"+escape(str))}return this.getAnchorUrl("")},getAnchorUrl:function(anchor){return(this.baseUrl||"")+anchor},setHash:function(hash){var pageNumber,dest;if(hash.indexOf("=")>=0){var params=parseQueryString(hash);if("search"in params&&this.eventBus.dispatch("findfromurlhash",{source:this,query:params.search.replace(/"/g,""),phraseSearch:"true"===params.phrase}),"nameddest"in params)return this.pdfHistory&&this.pdfHistory.updateNextHashParam(params.nameddest),void this.navigateTo(params.nameddest);if("page"in params&&(pageNumber=0|params.page||1),"zoom"in params){var zoomArgs=params.zoom.split(","),zoomArg=zoomArgs[0],zoomArgNumber=parseFloat(zoomArg);zoomArg.indexOf("Fit")===-1?dest=[null,{name:"XYZ"},zoomArgs.length>1?0|zoomArgs[1]:null,zoomArgs.length>2?0|zoomArgs[2]:null,zoomArgNumber?zoomArgNumber/100:zoomArg]:"Fit"===zoomArg||"FitB"===zoomArg?dest=[null,{name:zoomArg}]:"FitH"===zoomArg||"FitBH"===zoomArg||"FitV"===zoomArg||"FitBV"===zoomArg?dest=[null,{name:zoomArg},zoomArgs.length>1?0|zoomArgs[1]:null]:"FitR"===zoomArg?5!==zoomArgs.length?console.error("PDFLinkService_setHash: Not enough parameters for 'FitR'."):dest=[null,{name:zoomArg},0|zoomArgs[1],0|zoomArgs[2],0|zoomArgs[3],0|zoomArgs[4]]:console.error("PDFLinkService_setHash: '"+zoomArg+"' is not a valid zoom value.")}dest?this.pdfViewer.scrollPageIntoView({pageNumber:pageNumber||this.page,destArray:dest,allowNegativeOffset:!0}):pageNumber&&(this.page=pageNumber),"pagemode"in params&&this.eventBus.dispatch("pagemode",{source:this,mode:params.pagemode})}else if(isPageNumber(hash))this.page=0|hash;else{dest=unescape(hash);try{dest=JSON.parse(dest)}catch(ex){}if("string"==typeof dest||isValidExplicitDestination(dest))return this.pdfHistory&&this.pdfHistory.updateNextHashParam(dest),void this.navigateTo(dest);console.error("PDFLinkService_setHash: '"+unescape(hash)+"' is not a valid destination.")}},executeNamedAction:function(action){switch(action){case"GoBack":this.pdfHistory&&this.pdfHistory.back();break;case"GoForward":this.pdfHistory&&this.pdfHistory.forward();break;case"NextPage":this.page<this.pagesCount&&this.page++;break;case"PrevPage":this.page>1&&this.page--;break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}this.eventBus.dispatch("namedaction",{source:this,action:action})},cachePageRef:function(pageNum,pageRef){var refStr=pageRef.num+" "+pageRef.gen+" R";this._pagesRefCache[refStr]=pageNum}},PDFLinkService}(),SimpleLinkService=function(){function SimpleLinkService(){}return SimpleLinkService.prototype={get page(){return 0},set page(value){},navigateTo:function(dest){},getDestinationHash:function(dest){return"#"},getAnchorUrl:function(hash){return"#"},setHash:function(hash){},executeNamedAction:function(action){},cachePageRef:function(pageNum,pageRef){}},SimpleLinkService}();exports.PDFLinkService=PDFLinkService,exports.SimpleLinkService=SimpleLinkService}),function(root,factory){factory(root.pdfjsWebPDFPageView={},root.pdfjsWebUIUtils,root.pdfjsWebPDFRenderingQueue,root.pdfjsWebDOMEvents,root.pdfjsWebPDFJS)}(this,function(exports,uiUtils,pdfRenderingQueue,domEvents,pdfjsLib){var CSS_UNITS=uiUtils.CSS_UNITS,DEFAULT_SCALE=uiUtils.DEFAULT_SCALE,getOutputScale=uiUtils.getOutputScale,approximateFraction=uiUtils.approximateFraction,roundToDivide=uiUtils.roundToDivide,RenderingStates=pdfRenderingQueue.RenderingStates,TEXT_LAYER_RENDER_DELAY=200,PDFPageView=function(){function PDFPageView(options){var container=options.container,id=options.id,scale=options.scale,defaultViewport=options.defaultViewport,renderingQueue=options.renderingQueue,textLayerFactory=options.textLayerFactory,annotationLayerFactory=options.annotationLayerFactory,enhanceTextSelection=options.enhanceTextSelection||!1,renderInteractiveForms=options.renderInteractiveForms||!1;this.id=id,this.renderingId="page"+id,this.rotation=0,this.scale=scale||DEFAULT_SCALE,this.viewport=defaultViewport,this.pdfPageRotate=defaultViewport.rotation,this.hasRestrictedScaling=!1,this.enhanceTextSelection=enhanceTextSelection,this.renderInteractiveForms=renderInteractiveForms,this.eventBus=options.eventBus||domEvents.getGlobalEventBus(),this.renderingQueue=renderingQueue,this.textLayerFactory=textLayerFactory,this.annotationLayerFactory=annotationLayerFactory,this.renderingState=RenderingStates.INITIAL,this.resume=null,this.onBeforeDraw=null,this.onAfterDraw=null,this.textLayer=null,this.zoomLayer=null,this.annotationLayer=null;var div=document.createElement("div");div.id="pageContainer"+this.id,div.className="page",div.style.width=Math.floor(this.viewport.width)+"px",div.style.height=Math.floor(this.viewport.height)+"px",div.setAttribute("data-page-number",this.id),this.div=div,container.appendChild(div)}return PDFPageView.prototype={setPdfPage:function(pdfPage){this.pdfPage=pdfPage,this.pdfPageRotate=pdfPage.rotate;var totalRotation=(this.rotation+this.pdfPageRotate)%360;this.viewport=pdfPage.getViewport(this.scale*CSS_UNITS,totalRotation),this.stats=pdfPage.stats,this.reset()},destroy:function(){this.zoomLayer=null,this.reset(),this.pdfPage&&this.pdfPage.cleanup()},reset:function(keepZoomLayer,keepAnnotations){this.renderTask&&this.renderTask.cancel(),this.resume=null,this.renderingState=RenderingStates.INITIAL;var div=this.div;div.style.width=Math.floor(this.viewport.width)+"px",div.style.height=Math.floor(this.viewport.height)+"px";for(var childNodes=div.childNodes,currentZoomLayerNode=keepZoomLayer&&this.zoomLayer||null,currentAnnotationNode=keepAnnotations&&this.annotationLayer&&this.annotationLayer.div||null,i=childNodes.length-1;i>=0;i--){var node=childNodes[i];currentZoomLayerNode!==node&&currentAnnotationNode!==node&&div.removeChild(node)}div.removeAttribute("data-loaded"),currentAnnotationNode?this.annotationLayer.hide():this.annotationLayer=null,this.canvas&&!currentZoomLayerNode&&(this.canvas.width=0,this.canvas.height=0,delete this.canvas),this.loadingIconDiv=document.createElement("div"),this.loadingIconDiv.className="loadingIcon",div.appendChild(this.loadingIconDiv)},update:function(scale,rotation){this.scale=scale||this.scale,"undefined"!=typeof rotation&&(this.rotation=rotation);var totalRotation=(this.rotation+this.pdfPageRotate)%360;this.viewport=this.viewport.clone({scale:this.scale*CSS_UNITS,rotation:totalRotation});var isScalingRestricted=!1;if(this.canvas&&pdfjsLib.PDFJS.maxCanvasPixels>0){var outputScale=this.outputScale;(Math.floor(this.viewport.width)*outputScale.sx|0)*(Math.floor(this.viewport.height)*outputScale.sy|0)>pdfjsLib.PDFJS.maxCanvasPixels&&(isScalingRestricted=!0)}if(this.canvas){if(pdfjsLib.PDFJS.useOnlyCssZoom||this.hasRestrictedScaling&&isScalingRestricted)return this.cssTransform(this.canvas,!0),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0});this.zoomLayer||(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform(this.zoomLayer.firstChild),this.reset(!0,!0)},updatePosition:function(){this.textLayer&&this.textLayer.render(TEXT_LAYER_RENDER_DELAY)},cssTransform:function(canvas,redrawAnnotations){var CustomStyle=pdfjsLib.CustomStyle,width=this.viewport.width,height=this.viewport.height,div=this.div;canvas.style.width=canvas.parentNode.style.width=div.style.width=Math.floor(width)+"px",canvas.style.height=canvas.parentNode.style.height=div.style.height=Math.floor(height)+"px";var relativeRotation=this.viewport.rotation-canvas._viewport.rotation,absRotation=Math.abs(relativeRotation),scaleX=1,scaleY=1;90!==absRotation&&270!==absRotation||(scaleX=height/width,scaleY=width/height);var cssTransform="rotate("+relativeRotation+"deg) scale("+scaleX+","+scaleY+")";if(CustomStyle.setProp("transform",canvas,cssTransform),this.textLayer){var textLayerViewport=this.textLayer.viewport,textRelativeRotation=this.viewport.rotation-textLayerViewport.rotation,textAbsRotation=Math.abs(textRelativeRotation),scale=width/textLayerViewport.width;90!==textAbsRotation&&270!==textAbsRotation||(scale=width/textLayerViewport.height);var transX,transY,textLayerDiv=this.textLayer.textLayerDiv;switch(textAbsRotation){case 0:transX=transY=0;break;case 90:transX=0,transY="-"+textLayerDiv.style.height;break;case 180:transX="-"+textLayerDiv.style.width,transY="-"+textLayerDiv.style.height;break;case 270:transX="-"+textLayerDiv.style.width,transY=0;break;default:console.error("Bad rotation value.")}CustomStyle.setProp("transform",textLayerDiv,"rotate("+textAbsRotation+"deg) scale("+scale+", "+scale+") translate("+transX+", "+transY+")"),CustomStyle.setProp("transformOrigin",textLayerDiv,"0% 0%")}redrawAnnotations&&this.annotationLayer&&this.annotationLayer.render(this.viewport,"display")},get width(){return this.viewport.width},get height(){return this.viewport.height},getPagePoint:function(x,y){return this.viewport.convertToPdfPoint(x,y)},draw:function(){function pageViewDrawCallback(error){if(renderTask===self.renderTask&&(self.renderTask=null),"cancelled"===error)return void rejectRenderPromise(error);if(self.renderingState=RenderingStates.FINISHED,isCanvasHidden&&(self.canvas.removeAttribute("hidden"),isCanvasHidden=!1),self.loadingIconDiv&&(div.removeChild(self.loadingIconDiv),delete self.loadingIconDiv),self.zoomLayer){var zoomLayerCanvas=self.zoomLayer.firstChild;zoomLayerCanvas.width=0,zoomLayerCanvas.height=0,div.contains(self.zoomLayer)&&div.removeChild(self.zoomLayer),self.zoomLayer=null}self.error=error,self.stats=pdfPage.stats,self.onAfterDraw&&self.onAfterDraw(),self.eventBus.dispatch("pagerendered",{source:self,pageNumber:self.id,cssTransform:!1}),error?rejectRenderPromise(error):resolveRenderPromise(void 0)}this.renderingState!==RenderingStates.INITIAL&&console.error("Must be in new state before drawing"),this.renderingState=RenderingStates.RUNNING;var pdfPage=this.pdfPage,viewport=this.viewport,div=this.div,canvasWrapper=document.createElement("div");canvasWrapper.style.width=div.style.width,canvasWrapper.style.height=div.style.height,canvasWrapper.classList.add("canvasWrapper");var canvas=document.createElement("canvas");canvas.id="page"+this.id,canvas.setAttribute("hidden","hidden");var isCanvasHidden=!0;canvasWrapper.appendChild(canvas),this.annotationLayer&&this.annotationLayer.div?div.insertBefore(canvasWrapper,this.annotationLayer.div):div.appendChild(canvasWrapper),this.canvas=canvas,canvas.mozOpaque=!0;var ctx=canvas.getContext("2d",{alpha:!1}),outputScale=getOutputScale(ctx);if(this.outputScale=outputScale,pdfjsLib.PDFJS.useOnlyCssZoom){var actualSizeViewport=viewport.clone({scale:CSS_UNITS});outputScale.sx*=actualSizeViewport.width/viewport.width,outputScale.sy*=actualSizeViewport.height/viewport.height,outputScale.scaled=!0}if(pdfjsLib.PDFJS.maxCanvasPixels>0){var pixelsInViewport=viewport.width*viewport.height,maxScale=Math.sqrt(pdfjsLib.PDFJS.maxCanvasPixels/pixelsInViewport);outputScale.sx>maxScale||outputScale.sy>maxScale?(outputScale.sx=maxScale,outputScale.sy=maxScale,outputScale.scaled=!0,this.hasRestrictedScaling=!0):this.hasRestrictedScaling=!1}var sfx=approximateFraction(outputScale.sx),sfy=approximateFraction(outputScale.sy);canvas.width=roundToDivide(viewport.width*outputScale.sx,sfx[0]),canvas.height=roundToDivide(viewport.height*outputScale.sy,sfy[0]),canvas.style.width=roundToDivide(viewport.width,sfx[1])+"px",canvas.style.height=roundToDivide(viewport.height,sfy[1])+"px",canvas._viewport=viewport;var textLayerDiv=null,textLayer=null;this.textLayerFactory&&(textLayerDiv=document.createElement("div"),textLayerDiv.className="textLayer",textLayerDiv.style.width=canvasWrapper.style.width,textLayerDiv.style.height=canvasWrapper.style.height,this.annotationLayer&&this.annotationLayer.div?div.insertBefore(textLayerDiv,this.annotationLayer.div):div.appendChild(textLayerDiv),textLayer=this.textLayerFactory.createTextLayerBuilder(textLayerDiv,this.id-1,this.viewport,this.enhanceTextSelection)),this.textLayer=textLayer;var resolveRenderPromise,rejectRenderPromise,promise=new Promise(function(resolve,reject){resolveRenderPromise=resolve,rejectRenderPromise=reject}),self=this,renderContinueCallback=null;this.renderingQueue&&(renderContinueCallback=function(cont){return self.renderingQueue.isHighestPriority(self)?(isCanvasHidden&&(self.canvas.removeAttribute("hidden"),isCanvasHidden=!1),void cont()):(self.renderingState=RenderingStates.PAUSED,void(self.resume=function(){self.renderingState=RenderingStates.RUNNING,cont()}))});var transform=outputScale.scaled?[outputScale.sx,0,0,outputScale.sy,0,0]:null,renderContext={canvasContext:ctx,transform:transform,viewport:this.viewport,renderInteractiveForms:this.renderInteractiveForms},renderTask=this.renderTask=this.pdfPage.render(renderContext);return renderTask.onContinue=renderContinueCallback,this.renderTask.promise.then(function(){pageViewDrawCallback(null),textLayer&&self.pdfPage.getTextContent({normalizeWhitespace:!0}).then(function(textContent){textLayer.setTextContent(textContent),textLayer.render(TEXT_LAYER_RENDER_DELAY)})},function(error){pageViewDrawCallback(error)}),this.annotationLayerFactory&&(this.annotationLayer||(this.annotationLayer=this.annotationLayerFactory.createAnnotationLayerBuilder(div,this.pdfPage,this.renderInteractiveForms)),this.annotationLayer.render(this.viewport,"display")),div.setAttribute("data-loaded",!0),self.onBeforeDraw&&self.onBeforeDraw(),promise},beforePrint:function(printContainer){var CustomStyle=pdfjsLib.CustomStyle,pdfPage=this.pdfPage,viewport=pdfPage.getViewport(1),PRINT_OUTPUT_SCALE=2,canvas=document.createElement("canvas");canvas.width=Math.floor(viewport.width)*PRINT_OUTPUT_SCALE,canvas.height=Math.floor(viewport.height)*PRINT_OUTPUT_SCALE,canvas.style.width=100*PRINT_OUTPUT_SCALE+"%";var cssScale="scale("+1/PRINT_OUTPUT_SCALE+", "+1/PRINT_OUTPUT_SCALE+")";CustomStyle.setProp("transform",canvas,cssScale),CustomStyle.setProp("transformOrigin",canvas,"0% 0%");var canvasWrapper=document.createElement("div");canvasWrapper.appendChild(canvas),printContainer.appendChild(canvasWrapper),canvas.mozPrintCallback=function(obj){var ctx=obj.context;ctx.save(),ctx.fillStyle="rgb(255, 255, 255)",ctx.fillRect(0,0,canvas.width,canvas.height),ctx.restore(),ctx._transformMatrix=[PRINT_OUTPUT_SCALE,0,0,PRINT_OUTPUT_SCALE,0,0],ctx.scale(PRINT_OUTPUT_SCALE,PRINT_OUTPUT_SCALE);var renderContext={canvasContext:ctx,viewport:viewport,intent:"print"};pdfPage.render(renderContext).promise.then(function(){obj.done()},function(error){console.error(error),"abort"in obj?obj.abort():obj.done()})}}},PDFPageView}();exports.PDFPageView=PDFPageView}),function(root,factory){factory(root.pdfjsWebTextLayerBuilder={},root.pdfjsWebDOMEvents,root.pdfjsWebPDFJS)}(this,function(exports,domEvents,pdfjsLib){function DefaultTextLayerFactory(){}var EXPAND_DIVS_TIMEOUT=300,TextLayerBuilder=function(){function TextLayerBuilder(options){this.textLayerDiv=options.textLayerDiv,this.eventBus=options.eventBus||domEvents.getGlobalEventBus(),this.renderingDone=!1,this.divContentDone=!1,this.pageIdx=options.pageIndex,this.pageNumber=this.pageIdx+1,this.matches=[],this.viewport=options.viewport,this.textDivs=[],this.findController=options.findController||null,this.textLayerRenderTask=null,this.enhanceTextSelection=options.enhanceTextSelection,this._bindMouse()}return TextLayerBuilder.prototype={_finishRendering:function(){if(this.renderingDone=!0,!this.enhanceTextSelection){var endOfContent=document.createElement("div");endOfContent.className="endOfContent",this.textLayerDiv.appendChild(endOfContent)}this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.pageNumber})},render:function(timeout){if(this.divContentDone&&!this.renderingDone){this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),this.textDivs=[];var textLayerFrag=document.createDocumentFragment();this.textLayerRenderTask=pdfjsLib.renderTextLayer({textContent:this.textContent,container:textLayerFrag,viewport:this.viewport,textDivs:this.textDivs,timeout:timeout,enhanceTextSelection:this.enhanceTextSelection}),this.textLayerRenderTask.promise.then(function(){this.textLayerDiv.appendChild(textLayerFrag),this._finishRendering(),this.updateMatches()}.bind(this),function(reason){})}},setTextContent:function(textContent){this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),this.textContent=textContent,this.divContentDone=!0},convertMatches:function(matches,matchesLength){var i=0,iIndex=0,bidiTexts=this.textContent.items,end=bidiTexts.length-1,queryLen=null===this.findController?0:this.findController.state.query.length,ret=[];if(!matches)return ret;for(var m=0,len=matches.length;m<len;m++){for(var matchIdx=matches[m];i!==end&&matchIdx>=iIndex+bidiTexts[i].str.length;)iIndex+=bidiTexts[i].str.length,i++;i===bidiTexts.length&&console.error("Could not find a matching mapping");var match={begin:{divIdx:i,offset:matchIdx-iIndex}};for(matchIdx+=matchesLength?matchesLength[m]:queryLen;i!==end&&matchIdx>iIndex+bidiTexts[i].str.length;)iIndex+=bidiTexts[i].str.length,i++;match.end={divIdx:i,offset:matchIdx-iIndex},ret.push(match)}return ret},renderMatches:function(matches){function beginText(begin,className){var divIdx=begin.divIdx;textDivs[divIdx].textContent="",appendTextToDiv(divIdx,0,begin.offset,className)}function appendTextToDiv(divIdx,fromOffset,toOffset,className){var div=textDivs[divIdx],content=bidiTexts[divIdx].str.substring(fromOffset,toOffset),node=document.createTextNode(content);if(className){var span=document.createElement("span");return span.className=className,span.appendChild(node),void div.appendChild(span)}div.appendChild(node)}if(0!==matches.length){var bidiTexts=this.textContent.items,textDivs=this.textDivs,prevEnd=null,pageIdx=this.pageIdx,isSelectedPage=null!==this.findController&&pageIdx===this.findController.selected.pageIdx,selectedMatchIdx=null===this.findController?-1:this.findController.selected.matchIdx,highlightAll=null!==this.findController&&this.findController.state.highlightAll,infinity={divIdx:-1,offset:void 0},i0=selectedMatchIdx,i1=i0+1;if(highlightAll)i0=0,i1=matches.length;else if(!isSelectedPage)return;for(var i=i0;i<i1;i++){var match=matches[i],begin=match.begin,end=match.end,isSelected=isSelectedPage&&i===selectedMatchIdx,highlightSuffix=isSelected?" selected":"";if(this.findController&&this.findController.updateMatchPosition(pageIdx,i,textDivs,begin.divIdx),prevEnd&&begin.divIdx===prevEnd.divIdx?appendTextToDiv(prevEnd.divIdx,prevEnd.offset,begin.offset):(null!==prevEnd&&appendTextToDiv(prevEnd.divIdx,prevEnd.offset,infinity.offset),beginText(begin)),begin.divIdx===end.divIdx)appendTextToDiv(begin.divIdx,begin.offset,end.offset,"highlight"+highlightSuffix);else{appendTextToDiv(begin.divIdx,begin.offset,infinity.offset,"highlight begin"+highlightSuffix);for(var n0=begin.divIdx+1,n1=end.divIdx;n0<n1;n0++)textDivs[n0].className="highlight middle"+highlightSuffix;beginText(end,"highlight end"+highlightSuffix)}prevEnd=end}prevEnd&&appendTextToDiv(prevEnd.divIdx,prevEnd.offset,infinity.offset)}},updateMatches:function(){if(this.renderingDone){for(var matches=this.matches,textDivs=this.textDivs,bidiTexts=this.textContent.items,clearedUntilDivIdx=-1,i=0,len=matches.length;i<len;i++){for(var match=matches[i],begin=Math.max(clearedUntilDivIdx,match.begin.divIdx),n=begin,end=match.end.divIdx;n<=end;n++){var div=textDivs[n];div.textContent=bidiTexts[n].str,div.className=""}clearedUntilDivIdx=match.end.divIdx+1}if(null!==this.findController&&this.findController.active){var pageMatches,pageMatchesLength;null!==this.findController&&(pageMatches=this.findController.pageMatches[this.pageIdx]||null,pageMatchesLength=this.findController.pageMatchesLength?this.findController.pageMatchesLength[this.pageIdx]||null:null),this.matches=this.convertMatches(pageMatches,pageMatchesLength),this.renderMatches(this.matches)}}},_bindMouse:function(){var div=this.textLayerDiv,self=this,expandDivsTimer=null;div.addEventListener("mousedown",function(e){if(self.enhanceTextSelection&&self.textLayerRenderTask)return self.textLayerRenderTask.expandTextDivs(!0),void(expandDivsTimer&&(clearTimeout(expandDivsTimer),expandDivsTimer=null));var end=div.querySelector(".endOfContent");if(end){var adjustTop=e.target!==div;if(adjustTop=adjustTop&&"none"!==window.getComputedStyle(end).getPropertyValue("-moz-user-select")){var divBounds=div.getBoundingClientRect(),r=Math.max(0,(e.pageY-divBounds.top)/divBounds.height);end.style.top=(100*r).toFixed(2)+"%"}end.classList.add("active")}}),div.addEventListener("mouseup",function(e){if(self.enhanceTextSelection&&self.textLayerRenderTask)return void(expandDivsTimer=setTimeout(function(){self.textLayerRenderTask.expandTextDivs(!1),expandDivsTimer=null},EXPAND_DIVS_TIMEOUT));var end=div.querySelector(".endOfContent");end&&(end.style.top="",end.classList.remove("active"))})}},TextLayerBuilder}();DefaultTextLayerFactory.prototype={createTextLayerBuilder:function(textLayerDiv,pageIndex,viewport,enhanceTextSelection){return new TextLayerBuilder({textLayerDiv:textLayerDiv,pageIndex:pageIndex,viewport:viewport,enhanceTextSelection:enhanceTextSelection})}},exports.TextLayerBuilder=TextLayerBuilder,exports.DefaultTextLayerFactory=DefaultTextLayerFactory}),function(root,factory){factory(root.pdfjsWebAnnotationLayerBuilder={},root.pdfjsWebUIUtils,root.pdfjsWebPDFLinkService,root.pdfjsWebPDFJS)}(this,function(exports,uiUtils,pdfLinkService,pdfjsLib){function DefaultAnnotationLayerFactory(){}var mozL10n=uiUtils.mozL10n,SimpleLinkService=pdfLinkService.SimpleLinkService,AnnotationLayerBuilder=function(){function AnnotationLayerBuilder(options){this.pageDiv=options.pageDiv,this.pdfPage=options.pdfPage,this.renderInteractiveForms=options.renderInteractiveForms,this.linkService=options.linkService,this.downloadManager=options.downloadManager,this.div=null}return AnnotationLayerBuilder.prototype={render:function(viewport,intent){var self=this,parameters={intent:void 0===intent?"display":intent};this.pdfPage.getAnnotations(parameters).then(function(annotations){if(viewport=viewport.clone({dontFlip:!0}),parameters={viewport:viewport,div:self.div,annotations:annotations,page:self.pdfPage,renderInteractiveForms:self.renderInteractiveForms,linkService:self.linkService,downloadManager:self.downloadManager},self.div)pdfjsLib.AnnotationLayer.update(parameters);else{if(0===annotations.length)return;self.div=document.createElement("div"),self.div.className="annotationLayer",self.pageDiv.appendChild(self.div),parameters.div=self.div,pdfjsLib.AnnotationLayer.render(parameters),"undefined"!=typeof mozL10n&&mozL10n.translate(self.div)}})},hide:function(){this.div&&this.div.setAttribute("hidden","true")}},AnnotationLayerBuilder}();DefaultAnnotationLayerFactory.prototype={createAnnotationLayerBuilder:function(pageDiv,pdfPage,renderInteractiveForms){return new AnnotationLayerBuilder({pageDiv:pageDiv,pdfPage:pdfPage,renderInteractiveForms:renderInteractiveForms,linkService:new SimpleLinkService})}},exports.AnnotationLayerBuilder=AnnotationLayerBuilder,exports.DefaultAnnotationLayerFactory=DefaultAnnotationLayerFactory}),function(root,factory){factory(root.pdfjsWebPDFViewer={},root.pdfjsWebUIUtils,root.pdfjsWebPDFPageView,root.pdfjsWebPDFRenderingQueue,root.pdfjsWebTextLayerBuilder,root.pdfjsWebAnnotationLayerBuilder,root.pdfjsWebPDFLinkService,root.pdfjsWebDOMEvents,root.pdfjsWebPDFJS)}(this,function(exports,uiUtils,pdfPageView,pdfRenderingQueue,textLayerBuilder,annotationLayerBuilder,pdfLinkService,domEvents,pdfjsLib){var UNKNOWN_SCALE=uiUtils.UNKNOWN_SCALE,SCROLLBAR_PADDING=uiUtils.SCROLLBAR_PADDING,VERTICAL_PADDING=uiUtils.VERTICAL_PADDING,MAX_AUTO_SCALE=uiUtils.MAX_AUTO_SCALE,CSS_UNITS=uiUtils.CSS_UNITS,DEFAULT_SCALE=uiUtils.DEFAULT_SCALE,DEFAULT_SCALE_VALUE=uiUtils.DEFAULT_SCALE_VALUE,scrollIntoView=uiUtils.scrollIntoView,watchScroll=uiUtils.watchScroll,getVisibleElements=uiUtils.getVisibleElements,PDFPageView=pdfPageView.PDFPageView,RenderingStates=pdfRenderingQueue.RenderingStates,PDFRenderingQueue=pdfRenderingQueue.PDFRenderingQueue,TextLayerBuilder=textLayerBuilder.TextLayerBuilder,AnnotationLayerBuilder=annotationLayerBuilder.AnnotationLayerBuilder,SimpleLinkService=pdfLinkService.SimpleLinkService,PresentationModeState={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3},DEFAULT_CACHE_SIZE=10,PDFViewer=function(){function PDFPageViewBuffer(size){var data=[];this.push=function(view){var i=data.indexOf(view);i>=0&&data.splice(i,1),data.push(view),data.length>size&&data.shift().destroy()},this.resize=function(newSize){for(size=newSize;data.length>size;)data.shift().destroy()}}function isSameScale(oldScale,newScale){return newScale===oldScale||Math.abs(newScale-oldScale)<1e-15}function PDFViewer(options){this.container=options.container,this.viewer=options.viewer||options.container.firstElementChild,this.eventBus=options.eventBus||domEvents.getGlobalEventBus(),this.linkService=options.linkService||new SimpleLinkService,this.downloadManager=options.downloadManager||null,this.removePageBorders=options.removePageBorders||!1,this.enhanceTextSelection=options.enhanceTextSelection||!1,this.renderInteractiveForms=options.renderInteractiveForms||!1,this.defaultRenderingQueue=!options.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new PDFRenderingQueue,this.renderingQueue.setViewer(this)):this.renderingQueue=options.renderingQueue,this.scroll=watchScroll(this.container,this._scrollUpdate.bind(this)),this.presentationModeState=PresentationModeState.UNKNOWN,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders")}return PDFViewer.prototype={get pagesCount(){return this._pages.length},getPageView:function(index){return this._pages[index]},get currentPageNumber(){return this._currentPageNumber},set currentPageNumber(val){if((0|val)!==val)throw new Error("Invalid page number.");return this.pdfDocument?void this._setCurrentPageNumber(val,!0):void(this._currentPageNumber=val)},_setCurrentPageNumber:function(val,resetCurrentPageView){if(this._currentPageNumber===val)return void(resetCurrentPageView&&this._resetCurrentPageView());if(!(0<val&&val<=this.pagesCount))return void console.error('PDFViewer_setCurrentPageNumber: "'+val+'" is out of bounds.');var arg={source:this,pageNumber:val};this._currentPageNumber=val,this.eventBus.dispatch("pagechanging",arg),this.eventBus.dispatch("pagechange",arg),resetCurrentPageView&&this._resetCurrentPageView()},get currentScale(){return this._currentScale!==UNKNOWN_SCALE?this._currentScale:DEFAULT_SCALE},set currentScale(val){if(isNaN(val))throw new Error("Invalid numeric scale");return this.pdfDocument?void this._setScale(val,!1):(this._currentScale=val,void(this._currentScaleValue=val!==UNKNOWN_SCALE?val.toString():null))},get currentScaleValue(){return this._currentScaleValue},set currentScaleValue(val){return this.pdfDocument?void this._setScale(val,!1):(this._currentScale=isNaN(val)?UNKNOWN_SCALE:val,void(this._currentScaleValue=val.toString()))},get pagesRotation(){return this._pagesRotation},set pagesRotation(rotation){if("number"!=typeof rotation||rotation%90!==0)throw new Error("Invalid pages rotation angle.");if(this._pagesRotation=rotation,this.pdfDocument){for(var i=0,l=this._pages.length;i<l;i++){var pageView=this._pages[i];pageView.update(pageView.scale,rotation)}this._setScale(this._currentScaleValue,!0),this.defaultRenderingQueue&&this.update()}},setDocument:function(pdfDocument){if(this.pdfDocument&&this._resetView(),this.pdfDocument=pdfDocument,pdfDocument){var resolvePagesPromise,pagesCount=pdfDocument.numPages,self=this,pagesPromise=new Promise(function(resolve){resolvePagesPromise=resolve});this.pagesPromise=pagesPromise,pagesPromise.then(function(){self.eventBus.dispatch("pagesloaded",{source:self,pagesCount:pagesCount})});var isOnePageRenderedResolved=!1,resolveOnePageRendered=null,onePageRendered=new Promise(function(resolve){resolveOnePageRendered=resolve});this.onePageRendered=onePageRendered;var bindOnAfterAndBeforeDraw=function(pageView){pageView.onBeforeDraw=function(){self._buffer.push(this)},pageView.onAfterDraw=function(){isOnePageRenderedResolved||(isOnePageRenderedResolved=!0,resolveOnePageRendered())}},firstPagePromise=pdfDocument.getPage(1);return this.firstPagePromise=firstPagePromise,firstPagePromise.then(function(pdfPage){for(var scale=this.currentScale,viewport=pdfPage.getViewport(scale*CSS_UNITS),pageNum=1;pageNum<=pagesCount;++pageNum){var textLayerFactory=null;pdfjsLib.PDFJS.disableTextLayer||(textLayerFactory=this);var pageView=new PDFPageView({container:this.viewer,eventBus:this.eventBus,id:pageNum,scale:scale,defaultViewport:viewport.clone(),renderingQueue:this.renderingQueue,textLayerFactory:textLayerFactory,annotationLayerFactory:this,enhanceTextSelection:this.enhanceTextSelection,renderInteractiveForms:this.renderInteractiveForms});bindOnAfterAndBeforeDraw(pageView),this._pages.push(pageView)}var linkService=this.linkService;onePageRendered.then(function(){if(pdfjsLib.PDFJS.disableAutoFetch)resolvePagesPromise();else for(var getPagesLeft=pagesCount,pageNum=1;pageNum<=pagesCount;++pageNum)pdfDocument.getPage(pageNum).then(function(pageNum,pdfPage){var pageView=self._pages[pageNum-1];pageView.pdfPage||pageView.setPdfPage(pdfPage),linkService.cachePageRef(pageNum,pdfPage.ref),getPagesLeft--,getPagesLeft||resolvePagesPromise();
}.bind(null,pageNum))}),self.eventBus.dispatch("pagesinit",{source:self}),this.defaultRenderingQueue&&this.update(),this.findController&&this.findController.resolveFirstPage()}.bind(this))}},_resetView:function(){this._pages=[],this._currentPageNumber=1,this._currentScale=UNKNOWN_SCALE,this._currentScaleValue=null,this._buffer=new PDFPageViewBuffer(DEFAULT_CACHE_SIZE),this._location=null,this._pagesRotation=0,this._pagesRequests=[];for(var container=this.viewer;container.hasChildNodes();)container.removeChild(container.lastChild)},_scrollUpdate:function(){if(0!==this.pagesCount){this.update();for(var i=0,ii=this._pages.length;i<ii;i++)this._pages[i].updatePosition()}},_setScaleDispatchEvent:function(newScale,newValue,preset){var arg={source:this,scale:newScale,presetValue:preset?newValue:void 0};this.eventBus.dispatch("scalechanging",arg),this.eventBus.dispatch("scalechange",arg)},_setScaleUpdatePages:function(newScale,newValue,noScroll,preset){if(this._currentScaleValue=newValue.toString(),isSameScale(this._currentScale,newScale))return void(preset&&this._setScaleDispatchEvent(newScale,newValue,!0));for(var i=0,ii=this._pages.length;i<ii;i++)this._pages[i].update(newScale);if(this._currentScale=newScale,!noScroll){var dest,page=this._currentPageNumber;!this._location||pdfjsLib.PDFJS.ignoreCurrentPositionOnZoom||this.isInPresentationMode||this.isChangingPresentationMode||(page=this._location.pageNumber,dest=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:page,destArray:dest,allowNegativeOffset:!0})}this._setScaleDispatchEvent(newScale,newValue,preset),this.defaultRenderingQueue&&this.update()},_setScale:function(value,noScroll){var scale=parseFloat(value);if(scale>0)this._setScaleUpdatePages(scale,value,noScroll,!1);else{var currentPage=this._pages[this._currentPageNumber-1];if(!currentPage)return;var hPadding=this.isInPresentationMode||this.removePageBorders?0:SCROLLBAR_PADDING,vPadding=this.isInPresentationMode||this.removePageBorders?0:VERTICAL_PADDING,pageWidthScale=(this.container.clientWidth-hPadding)/currentPage.width*currentPage.scale,pageHeightScale=(this.container.clientHeight-vPadding)/currentPage.height*currentPage.scale;switch(value){case"page-actual":scale=1;break;case"page-width":scale=pageWidthScale;break;case"page-height":scale=pageHeightScale;break;case"page-fit":scale=Math.min(pageWidthScale,pageHeightScale);break;case"auto":var isLandscape=currentPage.width>currentPage.height,horizontalScale=isLandscape?Math.min(pageHeightScale,pageWidthScale):pageWidthScale;scale=Math.min(MAX_AUTO_SCALE,horizontalScale);break;default:return void console.error('PDFViewer_setScale: "'+value+'" is an unknown zoom value.')}this._setScaleUpdatePages(scale,value,noScroll,!0)}},_resetCurrentPageView:function(){this.isInPresentationMode&&this._setScale(this._currentScaleValue,!0);var pageView=this._pages[this._currentPageNumber-1];scrollIntoView(pageView.div)},scrollPageIntoView:function(params){if(this.pdfDocument){if(arguments.length>1||"number"==typeof params){console.warn("Call of scrollPageIntoView() with obsolete signature.");var paramObj={};"number"==typeof params&&(paramObj.pageNumber=params),arguments[1]instanceof Array&&(paramObj.destArray=arguments[1]),params=paramObj}var pageNumber=params.pageNumber||0,dest=params.destArray||null,allowNegativeOffset=params.allowNegativeOffset||!1;if(this.isInPresentationMode||!dest)return void this._setCurrentPageNumber(pageNumber,!0);var pageView=this._pages[pageNumber-1];if(!pageView)return void console.error('PDFViewer_scrollPageIntoView: Invalid "pageNumber" parameter.');var widthScale,heightScale,x=0,y=0,width=0,height=0,changeOrientation=pageView.rotation%180!==0,pageWidth=(changeOrientation?pageView.height:pageView.width)/pageView.scale/CSS_UNITS,pageHeight=(changeOrientation?pageView.width:pageView.height)/pageView.scale/CSS_UNITS,scale=0;switch(dest[1].name){case"XYZ":x=dest[2],y=dest[3],scale=dest[4],x=null!==x?x:0,y=null!==y?y:pageHeight;break;case"Fit":case"FitB":scale="page-fit";break;case"FitH":case"FitBH":y=dest[2],scale="page-width",null===y&&this._location&&(x=this._location.left,y=this._location.top);break;case"FitV":case"FitBV":x=dest[2],width=pageWidth,height=pageHeight,scale="page-height";break;case"FitR":x=dest[2],y=dest[3],width=dest[4]-x,height=dest[5]-y;var hPadding=this.removePageBorders?0:SCROLLBAR_PADDING,vPadding=this.removePageBorders?0:VERTICAL_PADDING;widthScale=(this.container.clientWidth-hPadding)/width/CSS_UNITS,heightScale=(this.container.clientHeight-vPadding)/height/CSS_UNITS,scale=Math.min(Math.abs(widthScale),Math.abs(heightScale));break;default:return void console.error("PDFViewer_scrollPageIntoView: '"+dest[1].name+"' is not a valid destination type.")}if(scale&&scale!==this._currentScale?this.currentScaleValue=scale:this._currentScale===UNKNOWN_SCALE&&(this.currentScaleValue=DEFAULT_SCALE_VALUE),"page-fit"===scale&&!dest[4])return void scrollIntoView(pageView.div);var boundingRect=[pageView.viewport.convertToViewportPoint(x,y),pageView.viewport.convertToViewportPoint(x+width,y+height)],left=Math.min(boundingRect[0][0],boundingRect[1][0]),top=Math.min(boundingRect[0][1],boundingRect[1][1]);allowNegativeOffset||(left=Math.max(left,0),top=Math.max(top,0)),scrollIntoView(pageView.div,{left:left,top:top})}},_updateLocation:function(firstPage){var currentScale=this._currentScale,currentScaleValue=this._currentScaleValue,normalizedScaleValue=parseFloat(currentScaleValue)===currentScale?Math.round(1e4*currentScale)/100:currentScaleValue,pageNumber=firstPage.id,pdfOpenParams="#page="+pageNumber;pdfOpenParams+="&zoom="+normalizedScaleValue;var currentPageView=this._pages[pageNumber-1],container=this.container,topLeft=currentPageView.getPagePoint(container.scrollLeft-firstPage.x,container.scrollTop-firstPage.y),intLeft=Math.round(topLeft[0]),intTop=Math.round(topLeft[1]);pdfOpenParams+=","+intLeft+","+intTop,this._location={pageNumber:pageNumber,scale:normalizedScaleValue,top:intTop,left:intLeft,pdfOpenParams:pdfOpenParams}},update:function(){var visible=this._getVisiblePages(),visiblePages=visible.views;if(0!==visiblePages.length){var suggestedCacheSize=Math.max(DEFAULT_CACHE_SIZE,2*visiblePages.length+1);this._buffer.resize(suggestedCacheSize),this.renderingQueue.renderHighestPriority(visible);for(var currentId=this._currentPageNumber,firstPage=visible.first,i=0,ii=visiblePages.length,stillFullyVisible=!1;i<ii;++i){var page=visiblePages[i];if(page.percent<100)break;if(page.id===currentId){stillFullyVisible=!0;break}}stillFullyVisible||(currentId=visiblePages[0].id),this.isInPresentationMode||this._setCurrentPageNumber(currentId),this._updateLocation(firstPage),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}},containsElement:function(element){return this.container.contains(element)},focus:function(){this.container.focus()},get isInPresentationMode(){return this.presentationModeState===PresentationModeState.FULLSCREEN},get isChangingPresentationMode(){return this.presentationModeState===PresentationModeState.CHANGING},get isHorizontalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollWidth>this.container.clientWidth},_getVisiblePages:function(){if(this.isInPresentationMode){var visible=[],currentPage=this._pages[this._currentPageNumber-1];return visible.push({id:currentPage.id,view:currentPage}),{first:currentPage,last:currentPage,views:visible}}return getVisibleElements(this.container,this._pages,!0)},cleanup:function(){for(var i=0,ii=this._pages.length;i<ii;i++)this._pages[i]&&this._pages[i].renderingState!==RenderingStates.FINISHED&&this._pages[i].reset()},_ensurePdfPageLoaded:function(pageView){if(pageView.pdfPage)return Promise.resolve(pageView.pdfPage);var pageNumber=pageView.id;if(this._pagesRequests[pageNumber])return this._pagesRequests[pageNumber];var promise=this.pdfDocument.getPage(pageNumber).then(function(pdfPage){return pageView.setPdfPage(pdfPage),this._pagesRequests[pageNumber]=null,pdfPage}.bind(this));return this._pagesRequests[pageNumber]=promise,promise},forceRendering:function(currentlyVisiblePages){var visiblePages=currentlyVisiblePages||this._getVisiblePages(),pageView=this.renderingQueue.getHighestPriority(visiblePages,this._pages,this.scroll.down);return!!pageView&&(this._ensurePdfPageLoaded(pageView).then(function(){this.renderingQueue.renderView(pageView)}.bind(this)),!0)},getPageTextContent:function(pageIndex){return this.pdfDocument.getPage(pageIndex+1).then(function(page){return page.getTextContent({normalizeWhitespace:!0})})},createTextLayerBuilder:function(textLayerDiv,pageIndex,viewport,enhanceTextSelection){return new TextLayerBuilder({textLayerDiv:textLayerDiv,eventBus:this.eventBus,pageIndex:pageIndex,viewport:viewport,findController:this.isInPresentationMode?null:this.findController,enhanceTextSelection:!this.isInPresentationMode&&enhanceTextSelection})},createAnnotationLayerBuilder:function(pageDiv,pdfPage,renderInteractiveForms){return new AnnotationLayerBuilder({pageDiv:pageDiv,pdfPage:pdfPage,renderInteractiveForms:renderInteractiveForms,linkService:this.linkService,downloadManager:this.downloadManager})},setFindController:function(findController){this.findController=findController}},PDFViewer}();exports.PresentationModeState=PresentationModeState,exports.PDFViewer=PDFViewer})}).call(pdfViewerLibs);var PDFJS=pdfjsLib.PDFJS;PDFJS.PDFViewer=pdfViewerLibs.pdfjsWebPDFViewer.PDFViewer,PDFJS.PDFPageView=pdfViewerLibs.pdfjsWebPDFPageView.PDFPageView,PDFJS.PDFLinkService=pdfViewerLibs.pdfjsWebPDFLinkService.PDFLinkService,PDFJS.TextLayerBuilder=pdfViewerLibs.pdfjsWebTextLayerBuilder.TextLayerBuilder,PDFJS.DefaultTextLayerFactory=pdfViewerLibs.pdfjsWebTextLayerBuilder.DefaultTextLayerFactory,PDFJS.AnnotationLayerBuilder=pdfViewerLibs.pdfjsWebAnnotationLayerBuilder.AnnotationLayerBuilder,PDFJS.DefaultAnnotationLayerFactory=pdfViewerLibs.pdfjsWebAnnotationLayerBuilder.DefaultAnnotationLayerFactory,PDFJS.PDFHistory=pdfViewerLibs.pdfjsWebPDFHistory.PDFHistory,PDFJS.PDFFindController=pdfViewerLibs.pdfjsWebPDFFindController.PDFFindController,PDFJS.EventBus=pdfViewerLibs.pdfjsWebUIUtils.EventBus,PDFJS.DownloadManager=pdfViewerLibs.pdfjsWebDownloadManager.DownloadManager,PDFJS.ProgressBar=pdfViewerLibs.pdfjsWebUIUtils.ProgressBar,exports.PDFJS=PDFJS});