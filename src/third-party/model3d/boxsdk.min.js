!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){(function(t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];e.hasOwnProperty("token")?this.representationLoader=new u["default"](e):this.representationLoader=new a["default"](e),this.metadata=null,this.apiBase=e.apiBase,this.token=e.token,this.sharedLink=e.sharedLink}var i=n(7),a=r(i),s=n(8),u=r(s),l=n(6),c=r(l);o.prototype.loadRepresentation=function(e,t,n,r){return this.representationLoader.load(e,t,n,r)},o.prototype.getMetadataClient=function(e,t,n){return this.metadata||(this.metadata=new c["default"](e||this.token,t||this.apiBase,n||this.sharedLink)),this.metadata},o.prototype.destroy=function(){this.representationLoader.destroy(),delete this.representationLoader,delete this.metadata},t.BoxSDK=o,e.exports=o}).call(t,function(){return this}())},function(e,t,n){(function(r){"use strict";function o(){}function i(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=m,this.queue=[],this.outcome=void 0,r.browser||(this.handled=b),e!==o&&l(this,e)}function a(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function s(e,t,n){v(function(){var r;try{r=t(n)}catch(o){return y.reject(e,o)}r===e?y.reject(e,new TypeError("Cannot resolve promise with itself")):y.resolve(e,r)})}function u(e){var t=e&&e.then;return e&&"object"==typeof e&&"function"==typeof t?function(){t.apply(e,arguments)}:void 0}function l(e,t){function n(t){i||(i=!0,y.reject(e,t))}function r(t){i||(i=!0,y.resolve(e,t))}function o(){t(r,n)}var i=!1,a=c(o);"error"===a.status&&n(a.value)}function c(e,t){var n={};try{n.value=e(t),n.status="success"}catch(r){n.status="error",n.value=r}return n}function f(e){return e instanceof this?e:y.resolve(new this(o),e)}function h(e){var t=new this(o);return y.reject(t,e)}function d(e){function t(e,t){function o(e){a[t]=e,++s!==r||i||(i=!0,y.resolve(l,a))}n.resolve(e).then(o,function(e){i||(i=!0,y.reject(l,e))})}var n=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,i=!1;if(!r)return this.resolve([]);for(var a=new Array(r),s=0,u=-1,l=new this(o);++u<r;)t(e[u],u);return l}function p(e){function t(e){n.resolve(e).then(function(e){i||(i=!0,y.resolve(s,e))},function(e){i||(i=!0,y.reject(s,e))})}var n=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,i=!1;if(!r)return this.resolve([]);for(var a=-1,s=new this(o);++a<r;)t(e[a]);return s}var v=n(10),y={},g=["REJECTED"],w=["FULFILLED"],m=["PENDING"];if(!r.browser)var b=["UNHANDLED"];e.exports=t=i,i.prototype["catch"]=function(e){return this.then(null,e)},i.prototype.then=function(e,t){if("function"!=typeof e&&this.state===w||"function"!=typeof t&&this.state===g)return this;var n=new this.constructor(o);if(r.browser||"function"==typeof t&&this.handled===b&&(this.handled=null),this.state!==m){var i=this.state===w?e:t;s(n,i,this.outcome)}else this.queue.push(new a(n,e,t));return n},a.prototype.callFulfilled=function(e){y.resolve(this.promise,e)},a.prototype.otherCallFulfilled=function(e){s(this.promise,this.onFulfilled,e)},a.prototype.callRejected=function(e){y.reject(this.promise,e)},a.prototype.otherCallRejected=function(e){s(this.promise,this.onRejected,e)},y.resolve=function(e,t){var n=c(u,t);if("error"===n.status)return y.reject(e,n.value);var r=n.value;if(r)l(e,r);else{e.state=w,e.outcome=t;for(var o=-1,i=e.queue.length;++o<i;)e.queue[o].callFulfilled(t)}return e},y.reject=function(e,t){e.state=g,e.outcome=t,r.browser||e.handled===b&&v(function(){e.handled===b&&r.emit("unhandledRejection",t,e)});for(var n=-1,o=e.queue.length;++n<o;)e.queue[n].callRejected(t);return e},t.resolve=f,t.reject=h,t.all=d,t.race=p}).call(t,n(5))},function(e,t){"use strict";function n(e){return"shared_link="+e}Object.defineProperty(t,"__esModule",{value:!0}),t.sharedLinkForHeader=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),s=r(a),u=n(4),l=r(u),c="https://api.box.com",f=function(){function e(t){o(this,e),this.apiBase=t.hasOwnProperty("apiBase")?t.apiBase:c,this.idCache={},this.xhr=new l["default"]}return i(e,[{key:"load",value:function(){throw new Error("load() not implemented!")}},{key:"getRepresentation",value:function(e,t){var n=this,r=arguments.length<=2||void 0===arguments[2]?{responseType:"arraybuffer"}:arguments[2];return new s["default"](function(o,i){n.get(e,r,t).then(function(t){switch(t.status){case 200:o(t);break;case 404:default:i(new Error("Issue Loading "+e))}})["catch"](i)})}},{key:"getFileIds",value:function(){throw new Error("getFileIds() has not been implemented")}},{key:"buildRepresentationUrl",value:function(){throw new Error("buildRepresentationUrl() has not been implemented")}},{key:"setApiBase",value:function(e){this.apiBase=e}},{key:"get",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{withCredentials:!0,responseType:null}:arguments[1],n=arguments[2];return this.xhr.get(e,n,t)}},{key:"addToCache",value:function(e,t,n){this.idCache[e]||(this.idCache[e]={}),this.idCache[e].fileId=t,this.idCache[e].fileVersionId=n}},{key:"getFromCache",value:function(e){return this.idCache[e]||null}},{key:"destroy",value:function(){delete this.apiBase;for(var e in this.idCache)delete this.idCache[e];delete this.idCache}}]),e}();e.exports=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),u=r(s),l=function(){function e(t){o(this,e),this.token=t,this.requests={},this.requestCount=0}return a(e,[{key:"addRequest",value:function(e,t,n){if(!n)do n=t+"-"+this.requestCount,this.requestCount++;while(this.requests.hasOwnProperty(n));if(this.requests.hasOwnProperty(n))throw new Error("Non-unique XHR Key");return this.requests[n]=e,n}},{key:"removeRequest",value:function(e){delete this.requests[e]}},{key:"abortRequest",value:function(e){var t=this.requests[e];if(t)return this.removeRequest(e),t.abort(),t}},{key:"abortRequests",value:function(){for(var e in this.requests)this.abortRequest(e)}},{key:"makeRequest",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?"GET":arguments[1],n=arguments.length<=2||void 0===arguments[2]?null:arguments[2],r=this,o=arguments[3],i=arguments.length<=4||void 0===arguments[4]?{withCredentials:!0,xhrKey:void 0,responseType:void 0,info:void 0,headers:void 0,sendToken:!0}:arguments[4];return e?new u["default"](function(a,s){var u=new XMLHttpRequest,l=r.addRequest(u,e,i.xhrKey);if(i.info&&(u.info=i.info),u.addEventListener("error",function(e){r.removeRequest(l),s(e)}),u.addEventListener("load",function(){var t=u.status,n=u.response;200===t||202===t||404===t?("json"===i.responseType&&"string"==typeof n&&(n=JSON.parse(n)),a({response:n,status:t,xhr:u})):s(new Error("Failed request for "+e)),r.removeRequest(l)}),o&&"function"==typeof o&&!function(){var e=function(e){o(r.getLoadStatus(e))};u.addEventListener("progress",e),u.addEventListener("abort",function(){u.removeEventListener("progress",e)})}(),u.open(t,e),i.responseType&&(u.responseType=i.responseType),i.headers)for(var c in i.headers)u.setRequestHeader(c,i.headers[c]);r.token&&i.sendToken!==!1&&u.setRequestHeader("authorization","Bearer "+r.token),u.withCredentials=!!i.withCredentials,u.send(n)}):u["default"].reject(new Error("No URL provided"))}},{key:"get",value:function(e,t,n){return this.makeRequest(e,"GET",null,t,n)}},{key:"post",value:function(e,t,n,r){return this.makeRequest(e,"POST",t,n,r)}},{key:"put",value:function(e,t,n,r){return this.makeRequest(e,"PUT",t,n,r)}},{key:"delete",value:function(e,t,n,r){return this.makeRequest(e,"DELETE",t,n,r)}},{key:"encodeToUri",value:function(e){if(!e)return"";var t=Object.keys(e),n=t.length,r=0,o="";for(r;n>r;++r){o+=(r>0?"&":"")+t[r]+"=";var a=e[t[r]];"object"===("undefined"==typeof a?"undefined":i(a))&&(a=JSON.stringify(a)),o+=encodeURIComponent(a)}return o}},{key:"getContentLength",value:function(e){var t=e.getResponseHeader("Content-Length");return parseInt(t,10)}},{key:"getLoadStatus",value:function(e){var t={total:0,loaded:0,xhr:e};return e.lengthComputable&&e.target&&(t.total=this.getContentLength(e.target)),t.loaded=e.loaded,t}},{key:"getCurrentRequests",value:function(){return this.requests}},{key:"setAuthToken",value:function(e){this.token=e}}]),e}();t["default"]=l},function(e,t){function n(){l=!1,a.length?u=a.concat(u):c=-1,u.length&&r()}function r(){if(!l){var e=setTimeout(n);l=!0;for(var t=u.length;t;){for(a=u,u=[];++c<t;)a&&a[c].run();c=-1,t=u.length}a=null,l=!1,clearTimeout(e)}}function o(e,t){this.fun=e,this.array=t}function i(){}var a,s=e.exports={},u=[],l=!1,c=-1;s.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new o(e,t)),1!==u.length||l||setTimeout(r,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=i,s.addListener=i,s.once=i,s.off=i,s.removeListener=i,s.removeAllListeners=i,s.emit=i,s.binding=function(e){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(4),s=r(a),u=n(2),l="https://api.box.com",c={"Content-Type":"application/json-patch+json"},f={"Content-Type":"application/json"},h=function(){function e(t,n,r){o(this,e),this.xhr=new s["default"](t),this.apiBase=void 0!==n?n:l,this.sharedLink=r}return i(e,[{key:"setApiBase",value:function(e){this.apiBase=e}},{key:"setAuthToken",value:function(e){this.xhr.setAuthToken(e)}},{key:"getSharedLinkHeader",value:function(){return this.sharedLink?{headers:{boxapi:(0,u.sharedLinkForHeader)(this.sharedLink)}}:void 0}},{key:"get",value:function(e,t,n){var r=Object.assign({responseType:"json"},this.getSharedLinkHeader());return this.xhr.get(this.apiBase+"/2.0/files/"+e+"/metadata/"+t+"/"+n,null,r)}},{key:"getAll",value:function(e){var t=Object.assign({responseType:"json"},this.getSharedLinkHeader());return this.xhr.get(this.apiBase+"/2.0/files/"+e+"/metadata",null,t)}},{key:"create",value:function(e,t,n,r){return this.xhr.post(this.apiBase+"/2.0/files/"+e+"/metadata/"+t+"/"+n,JSON.stringify(r),null,{headers:f})}},{key:"createOperation",value:function(e,t,n){if("add"!==e&&"replace"!==e&&"remove"!==e&&"test"!==e)throw new Error("Not a valid metadata update operation: "+e);var r={op:e,path:t};if(n){if("string"!=typeof n)throw new Error("value parameter for createOperation() requires string");r.value=n}return r}},{key:"update",value:function(e,t,n,r){return"string"==typeof r&&(r=[r]),this.xhr.put(this.apiBase+"/2.0/files/"+e+"/metadata/"+t+"/"+n,JSON.stringify(r),void 0,{headers:c})}},{key:"delete",value:function(e,t,n){return this.xhr["delete"](this.apiBase+"files/"+e+"/metadata/"+t+"/"+n)}},{key:"getGlobalProperties",value:function(e){return this.get(e,"global","properties")}},{key:"getEnterpriseTemplates",value:function(){var e=Object.assign({responseType:"json"},this.getSharedLinkHeader());return this.xhr.get(this.apiBase+"/2.0/metadata_templates/enterprise",null,e)}},{key:"getSchemaForTemplate",value:function(e,t){var n=Object.assign({responseType:"json"},this.getSharedLinkHeader());return this.xhr.get(this.apiBase+"/2.0/metadata_templates/"+e+"/"+t+"/schema",null,n)}}]),e}();t["default"]=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function v(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:v(o,t,n)}if("value"in r)return r.value;var i=r.get;if(void 0!==i)return i.call(n)},l=n(1),c=r(l),f=n(3),h=r(f),d="/index.php?rm=preview_file_association",p=function(e){function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];o(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return n.sharedName=e.sharedName,n}return a(t,e),s(t,[{key:"load",value:function(e,t,n,r,o){var i=this;return this.buildRepresentationUrl(e,t,n).then(function(e){return i.getRepresentation(e,r,o)})}},{key:"getFileIds",value:function(e,t){var n=this,r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];if(!e)return c["default"].reject(new Error("No File Path Passed to getFileIds!"));var o=this.getFromCache(e);if(o)return c["default"].resolve(o);r.filePaths={item:e},r.fileId=t;var i=this.apiBase+d+"&"+this.xhr.encodeToUri(r);return new c["default"](function(t,r){n.get(i).then(function(o){if(200===o.status){var i=JSON.parse(o.response);i.item?(n.addToCache(e,i.item.fileId,i.item.fileVersionId),t(n.getFromCache(e))):r(new Error("No file association for: "+e))}else r(new Error(o.statusText))})["catch"](r)})}},{key:"buildRepresentationUrl",value:function(e,t,n){if(!t||!n)throw new Error("Insufficient arguments for building asset url. File ID: "+e+"\n        File Version: "+t+" RepParams: "+n);return c["default"].resolve(this.apiBase+"/representation/file_version_"+t+"/"+n)}},{key:"get",value:function(e){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=arguments[2];return this.sharedName&&(e=this.appendSharedName(e)),n.withCredentials=!0,u(Object.getPrototypeOf(t.prototype),"get",this).call(this,e,n,r)}},{key:"appendSharedName",value:function(e){var t=e.indexOf("?")>0?"&":"?";return e+t+"shared_name="+this.sharedName}},{key:"destroy",value:function(){u(Object.getPrototypeOf(t.prototype),"destroy",this).call(this),delete this.sharedName}}]),t}(h["default"]);e.exports=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function k(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:k(o,t,n)}if("value"in r)return r.value;var i=r.get;if(void 0!==i)return i.call(n)},c=n(1),f=r(c),h=n(9),d=r(h),p=n(3),v=r(p),y=n(2),g={none:"none",success:"success",pending:"pending",error:"error"},w=500,m=5,b=function(e){function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(o(this,t),!e.token)throw new Error("No OAuth Token Provided!");var n=i(this,Object.getPrototypeOf(t).call(this,e));return n.xhr.setAuthToken(e.token),n.contentBaseCache={},n.search=new d["default"](n.xhr,n.apiBase),n.pollRetries={},n.sharedLink=e.sharedLink,n}return a(t,e),u(t,[{key:"get",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=arguments[2],r=t;return r.withCredentials=!1,this.sharedLink&&(r.headers=r.headers||{},r.headers.boxapi=(0,y.sharedLinkForHeader)(this.sharedLink)),this.xhr.get(e,n,r)}},{key:"extractDirectoryNames",value:function(e){e=e.replace(/^\w\:/,"");var t=e.indexOf("\\")>-1?"\\":"/";return e=e.replace(/^\W*/,""),e.split(t)}},{key:"countPathMatches",value:function(e,t){if(!e.length)throw new Error("No entries");for(var n=0,r=e.length,o=r-1,i=e[o],a=t.length,s=a-1,u=t[s];u&&i&&s>=0&&o>=0;)u===i.name&&n++,o--,i=e[o],s--,u=t[s];return n}},{key:"searchForFileIds",value:function(e,t){var n=this,r=this.extractDirectoryNames(e),o=r.pop();return new f["default"](function(e,i){var a=o.split(".");o=a[0];var s={type:"file"};a[1]&&(s.file_extensions=a[1]),t?s.ancestor_folder_ids=t:console.warn("No ancestorFolderId provided. Be warned, this can be slow w/ Search API"),n.search.search(o,s).then(function(t){var o=t.response,i=null;return 1===o.entries.length?i=o.entries[0]:!function(){var e=-1;o.entries.forEach(function(t){var o=n.countPathMatches(t.path_collection.entries,r);o>e&&(e=o,i=t)})}(),i?void e({fileId:i.id,fileVersionId:i.file_version.id}):e(null)})["catch"](i)})}},{key:"getFileIds",value:function(e,t){var n=this;if(!e)return f["default"].reject(new Error("No File Path Passed to getFileIds()!"));var r=this.getFromCache(e);return r?f["default"].resolve(r):new f["default"](function(r,o){n.searchForFileIds(e,t).then(function(t){return t?(n.addToCache(e,t.fileId,t.fileVersionId),void r(n.getFromCache(e))):o(new Error("No file and file version ids for "+e))})["catch"](o)})}},{key:"getRepresentationUrl",value:function(e,t){var n=this,r=arguments.length<=2||void 0===arguments[2]?null:arguments[2],o=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];if(!t)return f["default"].reject("No validator supplied to find content for "+e);var i=r?"?"+this.xhr.encodeToUri(r):"";return this.contentBaseCache[e]||!function(){var t=n.apiBase+"/2.0/files/"+e+"?fields=representations";n.contentBaseCache[e]=new f["default"](function(r,i){n.get(t,s({responseType:"json"},o)).then(function(t){if(200!==t.status)throw new Error("Failed to find file representation info for: "+e);var n=t.response;if(!n.representations)throw new Error("No representations for "+e);r(n.representations.entries)})["catch"](i)})}(),this.contentBaseCache[e].then(function(r){if(!r)throw new Error("No representation entries for "+e);for(var o=r.length,i=0;o>i;++i){var a=r[i];if(t(a))return n.getContentUrl(a)}throw new Error("No valid representation found for "+e)}).then(function(e){return""+e+i})}},{key:"getContentUrl",value:function(e){var t=this,n=e.links;return new f["default"](function(r,o){switch(e.status){case g.success:r(n.content.url);break;case g.none:case g.pending:t.pollInfoStatus(n.info.url).then(function(){t.clearPollCount(n.info.url),r(n.content.url)})["catch"](function(e){t.clearPollCount(n.info.url),o(e)});break;case g.error:default:o(new Error("Error converting representation"+e.name))}})}},{key:"pollInfoStatus",value:function(e){var t=this,n=arguments.length<=1||void 0===arguments[1]?0:arguments[1],r=this.incrementPollCount(e);return r>=m?f["default"].reject(new Error("Max poll time exceeded for "+e)):new f["default"](function(r,o){t.get(e,{responseType:"json"}).then(function(i){if(200!==i.status)throw new Error("Info not available for "+e);var a=i.response;switch(a.status){case g.success:r();break;case g.none:case g.pending:window.setTimeout(function(){t.pollInfoStatus(e,w).then(r)["catch"](function(){o(new Error("Error getting info @ "+e))})},n);break;case g.error:default:throw new Error("Error getting info @ "+e)}})["catch"](o)})}},{key:"incrementPollCount",value:function(e){return this.pollRetries[e]=++this.pollRetries[e]||0,this.pollRetries[e]}},{key:"clearPollCount",value:function(e){delete this.pollRetries[e]}},{key:"destroy",value:function(){l(Object.getPrototypeOf(t.prototype),"destroy",this).call(this),delete this.search,delete this.contentBaseCache}}]),t}(v["default"]);e.exports=b},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(2),a="https://api.box.com",s=function(){function e(t){var n=arguments.length<=1||void 0===arguments[1]?a:arguments[1],o=arguments[2];if(r(this,e),!t)throw new Error("No XHR module given to search instance");this.apiBase=n,this.sharedLink=o,this.xhr=t}return o(e,[{key:"setApiBase",value:function(e){this.apiBase=e}},{key:"createSearchQuery",value:function(e,t){var n="";return t&&(n="&"+this.xhr.encodeToUri(t)),this.apiBase+"/2.0/search?query="+e+n}},{key:"search",value:function(e,t){var n={responseType:"json"};this.sharedLink&&(n.headers={},n.headers.boxapi=(0,i.sharedLinkForHeader)(this.sharedLink));var r=this.createSearchQuery(e,t);return this.xhr.get(r,null,n)}}]),e}();t["default"]=s},function(e,t,n){(function(t,n){"use strict";function r(){f=!0;for(var e,t,n=h.length;n;){for(t=h,h=[],e=-1;++e<n;)t[e]();n=h.length}f=!1}function o(e){1!==h.push(e)||f||i()}var i,a=t.MutationObserver||t.WebKitMutationObserver;if(n.browser)if(a){var s=0,u=new a(r),l=t.document.createTextNode("");u.observe(l,{characterData:!0}),i=function(){l.data=s=++s%2}}else if(t.setImmediate||"undefined"==typeof t.MessageChannel)i="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){r(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(r,0)};else{var c=new t.MessageChannel;c.port1.onmessage=r,i=function(){c.port2.postMessage(0)}}else i=function(){n.nextTick(r)};var f,h=[];e.exports=o}).call(t,function(){return this}(),n(5))}]);
//# sourceMappingURL=boxsdk-0.2.2.js.map